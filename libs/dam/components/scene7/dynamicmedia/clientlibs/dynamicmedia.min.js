(function(){var m=".s7dm-dynamic-media";
var c={BasicZoomViewer:"html5/js/BasicZoomViewer.js",FlyoutViewer:"html5/js/FlyoutViewer.js",MixedMediaViewer:"html5/js/MixedMediaViewer.js",SpinViewer:"html5/js/SpinViewer.js",VideoViewer:"html5/js/VideoViewer.js",ZoomViewer:"html5/js/ZoomViewer.js",ZoomVerticalViewer:"html5/js/ZoomVerticalViewer.js",Responsive:"libs/responsive_image.js"};
var l="s7responsiveViewer";
$(document).ready(function(){if($(m).length>0){var p=new S7dmUtils.Viewer();
var o=$(m).data("viewer-path");
var r=$(m).data("page-locale");
var q="/libs/dam/components/scene7/common/clientlibs/i18n.js";
if(typeof Granite!="undefined"&&typeof Granite.I18n!="undefined"){Granite.I18n.setLocale(r);
q=Granite.HTTP.externalize(q)
}$("head").append('<script type="text/javascript" src="'+q+'"><\/script>');
p.load(c,o).ready({success:j,fail:h})
}});
function j(){var o=$(m);
o.each(function(){b($(this))
})
}function b(v){var w=v.attr("id");
var p=S7dmUtils[w],t=v.data("asset-type"),r=v.data("mode"),s=v.data("stagesize");
if(typeof p!="undefined"&&p!=null){p.dispose();
S7dmUtils[w]=null;
v.removeClass(l)
}v.html("");
var q=v.data("viewer-type");
if(q){var o=e(v);
var u={containerId:v.attr("id"),params:o};
if(!(q=="FlyoutViewer"&&s)){v.addClass(l)
}p=new s7viewers[q](u);
if(typeof Granite!="undefined"&&typeof Granite.I18n!="undefined"){p.setLocalizedTexts(d())
}S7dmUtils[w]=p;
p.init()
}else{if(t==="image"){if(v.data("breakpoints")||r=="smartcrop"){g(v)
}else{f(v)
}}}}function f(w){var v=w.data("stagesize"),p=w.data("linkurl"),z=w.data("linktarget"),A=w.data("alt"),u=w.data("imagepreset"),q=w.data("imageserver"),x=w.data("urlmodifiers");
var y={src:q+w.data("asset-path")};
if(u){y.src+="?$"+u+"$"
}if(x){y.src+=(u?"&":"?")+x
}if(v){var o=v.split(",");
y.width=o[0];
if(o.length>1){y.height=o[1]
}}var r=$("<img>",y);
if(p){var s={href:p,target:z};
if(A){s.alt=A;
s.title=A;
r.attr("alt",A)
}var t=$("<a>",s);
t.append(r);
w.append(t)
}else{if(A){r.attr("alt",A)
}w.append(r)
}}function g(r){var q=r.data("imagepreset"),p=r.data("imageserver"),v=r.data("alt");
var t=r.data("urlmodifiers");
var s=$("<div>",{"class":"s7responsiveContainer"});
var u=r.attr("id")+"_resp";
var w={id:u,src:p+r.data("asset-path"),"class":"fluidimage","data-mode":r.data("mode"),"data-breakpoints":r.data("breakpoints")};
if(q){w.src+="?$"+q+"$"
}if(t){w.src+=(q?"&":"?")+t
}var o=$("<img>",w);
if(v){o.attr("alt",v)
}s.append(o);
r.append(s);
s7responsiveImage(document.getElementById(u))
}function e(w){var z=w.data("asset-path"),v=w.data("asset-type"),t=w.data("viewer-type"),A=w.data("imageserver"),x=w.data("videoserver"),p=w.data("contenturl"),q=w.data("config"),y=w.data("wcmdisabled"),u=w.data("stagesize"),o=w.data("viewermodifiers"),s=w.data("dms7");
var r={asset:z,serverurl:A,contenturl:p};
if(o){$.extend(r,a(o))
}if(!y&&y!=""){r.asset+="?cache=off"
}if(u){r.stagesize=u
}if(t=="FlyoutViewer"){r.imagereload="1,breakpoint,100;320;480"
}if(z.indexOf("/")!=0){r.aemmode="0"
}if(t.indexOf("Video")>=0||t.indexOf("Mixed")>=0){r.videoserverurl=x;
if(v=="video"||(typeof s!="undefined")){r.playback="native";
r.progressivebitrate="20000"
}}if(typeof q!="undefined"&&q.length>0){r.config=k(q)
}return r
}function k(p){var o=p.split("|");
return o[0]
}function n(p){var o=p.split("|");
return o[2]
}function h(){console.log("S7Viewer is missing")
}function a(s){var p={};
if(s){var o=s.split("&");
for(var r=0;
r<o.length;
r++){if(o[r].indexOf("=")>0){var q=o[r].substring(0,o[r].indexOf("="));
var t=o[r].substring(o[r].indexOf("=")+1);
p[q]=t
}}}return p
}function d(){var o={};
o[Granite.I18n.getLocale()]=i(s7sdk_i18n.localizedText);
o.defaultLocale=Granite.I18n.getLocale();
return o
}function i(u){var p={};
for(var r in u){var t=u[r];
for(var o in t){var s=r+"."+o;
var q=t[o];
p[s]=q
}}return p
}}).call(this);