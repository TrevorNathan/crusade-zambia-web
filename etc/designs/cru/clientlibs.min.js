$("#cru-nav .top-menu-item").hover(function(){var a=$(this).attr("id");
$(".mega-menu").hide();
$("#"+a+"-sub").show()
},function(){var a=$(this).attr("id");
setTimeout(function(){$("#"+a+"-sub").hide()
},10)
});
$("#cru-submenu .mega-menu").hover(function(){var a=$(this).attr("id");
a=a.slice(0,-4);
$("#"+a+" a").addClass("active")
},function(){var a=$(this).attr("id");
a=a.slice(0,-4);
$("#"+a+" a").removeClass("active")
});
(function(){setTimeout(function(){var d=jQuery("#cru-context-nav");
var b=jQuery("body");
if(!d.length){return
}var c=d.offset().top;
var e=d.height();
var a=jQuery("nav-cart-icon");
$(window).on("scroll",function(){var f=$(window).scrollTop();
if(f>c){d.addClass("fixed");
a.addClass("fixed");
b.css("padding-top",e)
}else{d.removeClass("fixed");
a.removeClass("fixed");
b.css("padding-top",0)
}})
},1000)
})();
$("#menu-toggle").click(function(a){a.preventDefault();
$("#cru-mobile-menu").toggleClass("visible");
$(".fa-bars",this).toggleClass("fa-times");
$("#cru-mobile-menu ul.open").each(function(){$(this).removeClass("open")
});
$("#cru-mobile-menu .icon.close").each(function(){$(this).removeClass("close")
});
$("#cru-mobile-menu a.active").each(function(){$(this).removeClass("active")
})
});
$("#cru-mobile-menu .first-level > .has-children > a > .icon").click(function(a){if(!$(this).hasClass("close")){$("#cru-mobile-menu .submenu.open").each(function(){$(this).removeClass("open")
});
$("#cru-mobile-menu .icon.close").each(function(){$(this).removeClass("close")
});
$("#cru-mobile-menu .first-level > .has-children > a").each(function(){$(this).removeClass("active")
})
}});
$("#cru-mobile-menu .has-children > a > .icon").click(function(a){$(this).toggleClass("close");
$(this).parent().next().toggleClass("open");
$(this).parent().toggleClass("active");
a.stopPropagation();
a.preventDefault()
});
$("#cru-header .language-link, #cru-header-nav .language-picker .fa-times").click(function(a){a.preventDefault();
$("#cru-header-nav .language-picker").toggleClass("closed");
setTimeout(function(){$("#cru-header-nav .language-picker .fa-times").toggleClass("dn")
},150)
});
$("#cru-header-nav .language-picker .picker-countries > a").click(function(b){b.preventDefault();
$("#cru-header-nav .language-picker .picker-countries > a").removeClass("active");
$(this).addClass("active");
var a=$(this).attr("data-continent");
$("#cru-header-nav .language-picker .picker-countries > li").hide();
$("#cru-header-nav .language-picker .picker-countries > #pickerContinent"+a).show()
});
(function(){var b=getCookie("giveCartItemCount");
var a=$("#cru-header .nav-cart-icon-desktop");
if(!b||!a.length){return
}a.removeClass("hidden");
$(".cart-item-count",a).text(b);
$("#cru-header .language-link").addClass("padding-right")
})();
(function(){const a=document.getElementById("main-menu");
const c=j(true);
const h=document.createElement("li");
h.classList.add("invisible");
h.setAttribute("id","more-menu");
a.appendChild(h);
const b=document.getElementById("more-menu");
b.innerHTML='<span>More <i class="far fa-chevron-down ml-1"></i></span><ul><li><span>More <i class="far fa-chevron-down ml-1"></i></span></li></ul>';
const d=document.querySelector("#more-menu ul");
window.addEventListener("load",l);
function l(){if(window.innerWidth>=576){g();
e()
}}function g(){while(a.offsetWidth<=j()){b.classList.remove("invisible");
const m=document.querySelector("#more-menu li:first-child");
let child=document.querySelector("#main-menu > li:nth-last-child(2)");
if(child){m.parentNode.insertBefore(child,m.nextSibling)
}}}function e(){let currentItemsArray=j(true);
let nextItemWidth=c[currentItemsArray.length-1];
let nextItem=document.querySelector("#more-menu ul li:nth-child(2)");
if(a.offsetWidth>j()+nextItemWidth&&nextItem){a.insertBefore(nextItem,a.lastElementChild);
if(d.childElementCount===1){b.classList.add("invisible")
}}}function j(n){let mainMenuItemsWidthsTotal=0;
let mainMenuItemsWidthsArray=[];
document.querySelectorAll("#main-menu > li").forEach(m);
function m(o){let width=f(o,true);
mainMenuItemsWidthsTotal+=width;
mainMenuItemsWidthsArray.push(width)
}if(n===true){return mainMenuItemsWidthsArray
}else{return mainMenuItemsWidthsTotal
}}function f(o,n){const m=o.offsetWidth;
const p=k(o,"left")+m+k(o,"right");
if(n===true){return p
}else{return m
}}function k(n,m){if(m==="left"){return parseInt(getComputedStyle(n).marginLeft)
}else{if(m==="right"){return parseInt(getComputedStyle(n).marginRight)
}else{return false
}}}window.addEventListener("resize",l)
})();
(function(){var e=$("#search-overlay");
var a=$("body");
function f(h){var g=a.hasClass("search-open");
if(g){c(h)
}else{d(h)
}}function d(g){g.preventDefault();
a.addClass("search-open");
e.css("display","flex");
e.find("input").focus()
}function c(g){g.preventDefault();
a.removeClass("search-open");
e.hide()
}function b(h){h.preventDefault();
var g=$(this).find("input").val();
window.location=this.action+"."+encodeURIComponent(g.replace(/\./g,"&#46;"))+".html"
}$("#cru-nav .search-toggle").click(f);
$("#search-overlay .close").click(c);
$("#menu-toggle").click(c);
$("#cru-mobile-menu .search").click(function(g){$("#menu-toggle").trigger("click");
d(g)
});
$("#search-overlay form").submit(b)
})();
(function(){var a="https://give.cru.org/cas";
var c=$("#cru-header .signin");
function b(){var d=getCookie("cru-profile");
if(!d){return
}d=parseJwt(d);
if(!d.first_name||!d.last_name){return
}$("#cru-header .signin .signin-name .inner").text([d.first_name,d.last_name].join(" "));
c.addClass("signed-in");
c.hover(function(){$(this).toggleClass("hover")
},function(){$(this).toggleClass("hover")
})
}b();
c.click(function(f){if($(this).hasClass("signed-in")){return
}f.preventDefault();
var d=$(".sign-in-modal");
d.load("/html/authentication/login.html",function(){d.modal();
var h,g;
var e=function(){d.find("form").submit(function(m){m.preventDefault();
var n=this,l=$(".alert-danger",n);
$(":input,:button",n).prop("disabled",true);
l.hide();
var k=$("input[name='username']",n);
var j=$("input[name='password']",n);
if(k.length){h=k.val()
}if(j.length){g=j.val()
}$.ajax({type:"POST",url:a+"/login",data:{username:h,password:g,mfa_token:$("input[name='mfa_token']",n).val()},xhrFields:{withCredentials:true},success:function(){b();
d.modal("hide");
d.empty()
},error:function(o){$(":input,:button",n).prop("disabled",false);
if(o&&o.responseJSON&&o.responseJSON.thekey_authn_error&&o.responseJSON.thekey_authn_error==="mfa_required"){d.load("/html/authentication/mfa.html",e)
}else{l.text("An error has occurred signing in. Please try again.").show()
}}})
})
};
e();
d.find("#signUpLink").click(function(j){j.preventDefault();
d.load("/html/authentication/signup.html",function(){d.find("form").submit(function(m){m.preventDefault();
var l=this,k=$(".alert-danger",l);
$(":input",l).prop("disabled",true);
k.hide();
$.ajax({type:"POST",url:a+"/register",data:{email:$("input[name='email']",l).val(),firstName:$("input[name='first_name']",l).val(),lastName:$("input[name='last_name']",l).val(),password:$("input[name='password']",l).val()},xhrFields:{withCredentials:true},success:function(){b();
d.modal("hide");
d.empty()
},error:function(n){$(":input",l).prop("disabled",false);
if(n&&n.data&&n.data.error){k.text(n.data.error).show()
}else{k.text("An error has occurred. Please try again.").show()
}}})
})
})
})
})
});
c.on("keypress",function(d){if(d.keyCode===13){$(this).trigger("click")
}});
c.find(".signout").click(function(d){d.preventDefault();
$.ajax({type:"DELETE",url:a+"/logout",xhrFields:{withCredentials:true},success:function(){window.location.reload()
}})
})
})();
$(".blog-archive-page .display-toggle").click(function(a){a.preventDefault();
if(!$(this).hasClass("clicked")){$(".display-toggle").each(function(){$(this).toggleClass("clicked")
});
$("#grid-list").toggleClass("blog-grid");
$("#grid-list").toggleClass("blog-list")
}});
/*!
  * Bootstrap v4.0.0 (https://getbootstrap.com)
  * Copyright 2011-2018 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
  */
(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?a(exports,require("jquery"),require("popper.js")):typeof define==="function"&&define.amd?define(["exports","jquery","popper.js"],a):(a((b.bootstrap={}),b.jQuery,b.Popper))
}(this,(function(s,c,j){c=c&&c.hasOwnProperty("default")?c["default"]:c;
j=j&&j.hasOwnProperty("default")?j["default"]:j;
function e(w,u){for(var t=0;
t<u.length;
t++){var v=u[t];
v.enumerable=v.enumerable||false;
v.configurable=true;
if("value" in v){v.writable=true
}Object.defineProperty(w,v.key,v)
}}function m(v,t,u){if(t){e(v.prototype,t)
}if(u){e(v,u)
}return v
}function l(){l=Object.assign||function(w){for(var u=1;
u<arguments.length;
u++){var v=arguments[u];
for(var t in v){if(Object.prototype.hasOwnProperty.call(v,t)){w[t]=v[t]
}}}return w
};
return l.apply(this,arguments)
}function k(u,t){u.prototype=Object.create(t.prototype);
u.prototype.constructor=u;
u.__proto__=t
}var d=function(E){var B=false;
var y=1000000;
function J(K){return{}.toString.call(K).match(/\s([a-zA-Z]+)/)[1].toLowerCase()
}function w(){return{bindType:B.end,delegateType:B.end,handle:function K(L){if(E(L.target).is(this)){return L.handleObj.handler.apply(this,arguments)
}return undefined
}}
}function t(){if(typeof window!=="undefined"&&window.QUnit){return false
}return{end:"transitionend"}
}function z(L){var M=this;
var K=false;
E(this).one(H.TRANSITION_END,function(){K=true
});
setTimeout(function(){if(!K){H.triggerTransitionEnd(M)
}},L);
return this
}function I(){B=t();
E.fn.emulateTransitionEnd=z;
if(H.supportsTransitionEnd()){E.event.special[H.TRANSITION_END]=w()
}}function u(K){K=typeof E.escapeSelector==="function"?E.escapeSelector(K).substr(1):K.replace(/(:|\.|\[|\]|,|=|@)/g,"\\$1");
return K
}var H={TRANSITION_END:"bsTransitionEnd",getUID:function C(K){do{K+=~~(Math.random()*y)
}while(document.getElementById(K));
return K
},getSelectorFromElement:function D(L){var K=L.getAttribute("data-target");
if(!K||K==="#"){K=L.getAttribute("href")||""
}if(K.charAt(0)==="#"){K=u(K)
}try{var N=E(document).find(K);
return N.length>0?K:null
}catch(M){return null
}},reflow:function x(K){return K.offsetHeight
},triggerTransitionEnd:function G(K){E(K).trigger(B.end)
},supportsTransitionEnd:function F(){return Boolean(B)
},isElement:function A(K){return(K[0]||K).nodeType
},typeCheckConfig:function v(K,L,O){for(var N in O){if(Object.prototype.hasOwnProperty.call(O,N)){var Q=O[N];
var M=L[N];
var P=M&&H.isElement(M)?"element":J(M);
if(!new RegExp(Q).test(P)){throw new Error(K.toUpperCase()+": "+('Option "'+N+'" provided type "'+P+'" ')+('but expected type "'+Q+'".'))
}}}}};
I();
return H
}(c);
var g=function(y){var D="alert";
var E="4.0.0";
var C="bs.alert";
var v="."+C;
var B=".data-api";
var u=y.fn[D];
var x=150;
var t={DISMISS:'[data-dismiss="alert"]'};
var A={CLOSE:"close"+v,CLOSED:"closed"+v,CLICK_DATA_API:"click"+v+B};
var z={ALERT:"alert",FADE:"fade",SHOW:"show"};
var w=function(){function K(Q){this._element=Q
}var L=K.prototype;
L.close=function P(R){R=R||this._element;
var Q=this._getRootElement(R);
var S=this._triggerCloseEvent(Q);
if(S.isDefaultPrevented()){return
}this._removeElement(Q)
};
L.dispose=function N(){y.removeData(this._element,C);
this._element=null
};
L._getRootElement=function O(R){var Q=d.getSelectorFromElement(R);
var S=false;
if(Q){S=y(Q)[0]
}if(!S){S=y(R).closest("."+z.ALERT)[0]
}return S
};
L._triggerCloseEvent=function H(Q){var R=y.Event(A.CLOSE);
y(Q).trigger(R);
return R
};
L._removeElement=function J(Q){var R=this;
y(Q).removeClass(z.SHOW);
if(!d.supportsTransitionEnd()||!y(Q).hasClass(z.FADE)){this._destroyElement(Q);
return
}y(Q).one(d.TRANSITION_END,function(S){return R._destroyElement(Q,S)
}).emulateTransitionEnd(x)
};
L._destroyElement=function I(Q){y(Q).detach().trigger(A.CLOSED).remove()
};
K._jQueryInterface=function G(Q){return this.each(function(){var R=y(this);
var S=R.data(C);
if(!S){S=new K(this);
R.data(C,S)
}if(Q==="close"){S[Q](this)
}})
};
K._handleDismiss=function M(Q){return function(R){if(R){R.preventDefault()
}Q.close(this)
}
};
m(K,null,[{key:"VERSION",get:function F(){return E
}}]);
return K
}();
y(document).on(A.CLICK_DATA_API,t.DISMISS,w._handleDismiss(new w()));
y.fn[D]=w._jQueryInterface;
y.fn[D].Constructor=w;
y.fn[D].noConflict=function(){y.fn[D]=u;
return w._jQueryInterface
};
return w
}(c);
var h=function(x){var C="button";
var D="4.0.0";
var B="bs.button";
var v="."+B;
var A=".data-api";
var u=x.fn[C];
var y={ACTIVE:"active",BUTTON:"btn",FOCUS:"focus"};
var t={DATA_TOGGLE_CARROT:'[data-toggle^="button"]',DATA_TOGGLE:'[data-toggle="buttons"]',INPUT:"input",ACTIVE:".active",BUTTON:".btn"};
var z={CLICK_DATA_API:"click"+v+A,FOCUS_BLUR_DATA_API:"focus"+v+A+" "+("blur"+v+A)};
var w=function(){function G(K){this._element=K
}var F=G.prototype;
F.toggle=function E(){var N=true;
var M=true;
var K=x(this._element).closest(t.DATA_TOGGLE)[0];
if(K){var L=x(this._element).find(t.INPUT)[0];
if(L){if(L.type==="radio"){if(L.checked&&x(this._element).hasClass(y.ACTIVE)){N=false
}else{var O=x(K).find(t.ACTIVE)[0];
if(O){x(O).removeClass(y.ACTIVE)
}}}if(N){if(L.hasAttribute("disabled")||K.hasAttribute("disabled")||L.classList.contains("disabled")||K.classList.contains("disabled")){return
}L.checked=!x(this._element).hasClass(y.ACTIVE);
x(L).trigger("change")
}L.focus();
M=false
}}if(M){this._element.setAttribute("aria-pressed",!x(this._element).hasClass(y.ACTIVE))
}if(N){x(this._element).toggleClass(y.ACTIVE)
}};
F.dispose=function J(){x.removeData(this._element,B);
this._element=null
};
G._jQueryInterface=function I(K){return this.each(function(){var L=x(this).data(B);
if(!L){L=new G(this);
x(this).data(B,L)
}if(K==="toggle"){L[K]()
}})
};
m(G,null,[{key:"VERSION",get:function H(){return D
}}]);
return G
}();
x(document).on(z.CLICK_DATA_API,t.DATA_TOGGLE_CARROT,function(F){F.preventDefault();
var E=F.target;
if(!x(E).hasClass(y.BUTTON)){E=x(E).closest(t.BUTTON)
}w._jQueryInterface.call(x(E),"toggle")
}).on(z.FOCUS_BLUR_DATA_API,t.DATA_TOGGLE_CARROT,function(F){var E=x(F.target).closest(t.BUTTON)[0];
x(E).toggleClass(y.FOCUS,/^focus(in)?$/.test(F.type))
});
x.fn[C]=w._jQueryInterface;
x.fn[C].Constructor=w;
x.fn[C].noConflict=function(){x.fn[C]=u;
return w._jQueryInterface
};
return w
}(c);
var n=function(B){var z="carousel";
var H="4.0.0";
var y="bs.carousel";
var C="."+y;
var u=".data-api";
var v=B.fn[z];
var D=600;
var J=37;
var E=39;
var x=500;
var A={interval:5000,keyboard:true,slide:false,pause:"hover",wrap:true};
var I={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean"};
var t={NEXT:"next",PREV:"prev",LEFT:"left",RIGHT:"right"};
var K={SLIDE:"slide"+C,SLID:"slid"+C,KEYDOWN:"keydown"+C,MOUSEENTER:"mouseenter"+C,MOUSELEAVE:"mouseleave"+C,TOUCHEND:"touchend"+C,LOAD_DATA_API:"load"+C+u,CLICK_DATA_API:"click"+C+u};
var w={CAROUSEL:"carousel",ACTIVE:"active",SLIDE:"slide",RIGHT:"carousel-item-right",LEFT:"carousel-item-left",NEXT:"carousel-item-next",PREV:"carousel-item-prev",ITEM:"carousel-item"};
var F={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",NEXT_PREV:".carousel-item-next, .carousel-item-prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'};
var G=function(){function aa(ag,af){this._items=null;
this._interval=null;
this._activeElement=null;
this._isPaused=false;
this._isSliding=false;
this.touchTimeout=null;
this._config=this._getConfig(af);
this._element=B(ag)[0];
this._indicatorsElement=B(this._element).find(F.INDICATORS)[0];
this._addEventListeners()
}var P=aa.prototype;
P.next=function Y(){if(!this._isSliding){this._slide(t.NEXT)
}};
P.nextWhenVisible=function ae(){if(!document.hidden&&B(this._element).is(":visible")&&B(this._element).css("visibility")!=="hidden"){this.next()
}};
P.prev=function X(){if(!this._isSliding){this._slide(t.PREV)
}};
P.pause=function R(af){if(!af){this._isPaused=true
}if(B(this._element).find(F.NEXT_PREV)[0]&&d.supportsTransitionEnd()){d.triggerTransitionEnd(this._element);
this.cycle(true)
}clearInterval(this._interval);
this._interval=null
};
P.cycle=function U(af){if(!af){this._isPaused=false
}if(this._interval){clearInterval(this._interval);
this._interval=null
}if(this._config.interval&&!this._isPaused){this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval)
}};
P.to=function N(ag){var ai=this;
this._activeElement=B(this._element).find(F.ACTIVE_ITEM)[0];
var af=this._getItemIndex(this._activeElement);
if(ag>this._items.length-1||ag<0){return
}if(this._isSliding){B(this._element).one(K.SLID,function(){return ai.to(ag)
});
return
}if(af===ag){this.pause();
this.cycle();
return
}var ah=ag>af?t.NEXT:t.PREV;
this._slide(ah,this._items[ag])
};
P.dispose=function ad(){B(this._element).off(C);
B.removeData(this._element,y);
this._items=null;
this._config=null;
this._element=null;
this._interval=null;
this._isPaused=null;
this._isSliding=null;
this._activeElement=null;
this._indicatorsElement=null
};
P._getConfig=function Q(af){af=l({},A,af);
d.typeCheckConfig(z,af,I);
return af
};
P._addEventListeners=function O(){var af=this;
if(this._config.keyboard){B(this._element).on(K.KEYDOWN,function(ag){return af._keydown(ag)
})
}if(this._config.pause==="hover"){B(this._element).on(K.MOUSEENTER,function(ag){return af.pause(ag)
}).on(K.MOUSELEAVE,function(ag){return af.cycle(ag)
});
if("ontouchstart" in document.documentElement){B(this._element).on(K.TOUCHEND,function(){af.pause();
if(af.touchTimeout){clearTimeout(af.touchTimeout)
}af.touchTimeout=setTimeout(function(ag){return af.cycle(ag)
},x+af._config.interval)
})
}}};
P._keydown=function L(af){if(/input|textarea/i.test(af.target.tagName)){return
}switch(af.which){case J:af.preventDefault();
this.prev();
break;
case E:af.preventDefault();
this.next();
break;
default:}};
P._getItemIndex=function ac(af){this._items=B.makeArray(B(af).parent().find(F.ITEM));
return this._items.indexOf(af)
};
P._getItemByDirection=function M(al,ag){var ai=al===t.NEXT;
var ak=al===t.PREV;
var an=this._getItemIndex(ag);
var aj=this._items.length-1;
var ah=ak&&an===0||ai&&an===aj;
if(ah&&!this._config.wrap){return ag
}var am=al===t.PREV?-1:1;
var af=(an+am)%this._items.length;
return af===-1?this._items[this._items.length-1]:this._items[af]
};
P._triggerSlideEvent=function Z(ag,aj){var ah=this._getItemIndex(ag);
var ai=this._getItemIndex(B(this._element).find(F.ACTIVE_ITEM)[0]);
var af=B.Event(K.SLIDE,{relatedTarget:ag,direction:aj,from:ai,to:ah});
B(this._element).trigger(af);
return af
};
P._setActiveIndicatorElement=function S(ag){if(this._indicatorsElement){B(this._indicatorsElement).find(F.ACTIVE).removeClass(w.ACTIVE);
var af=this._indicatorsElement.children[this._getItemIndex(ag)];
if(af){B(af).addClass(w.ACTIVE)
}}};
P._slide=function W(aq,al){var am=this;
var ag=B(this._element).find(F.ACTIVE_ITEM)[0];
var ap=this._getItemIndex(ag);
var ao=al||ag&&this._getItemByDirection(aq,ag);
var ak=this._getItemIndex(ao);
var an=Boolean(this._interval);
var aj;
var ai;
var ah;
if(aq===t.NEXT){aj=w.LEFT;
ai=w.NEXT;
ah=t.LEFT
}else{aj=w.RIGHT;
ai=w.PREV;
ah=t.RIGHT
}if(ao&&B(ao).hasClass(w.ACTIVE)){this._isSliding=false;
return
}var af=this._triggerSlideEvent(ao,ah);
if(af.isDefaultPrevented()){return
}if(!ag||!ao){return
}this._isSliding=true;
if(an){this.pause()
}this._setActiveIndicatorElement(ao);
var ar=B.Event(K.SLID,{relatedTarget:ao,direction:ah,from:ap,to:ak});
if(d.supportsTransitionEnd()&&B(this._element).hasClass(w.SLIDE)){B(ao).addClass(ai);
d.reflow(ao);
B(ag).addClass(aj);
B(ao).addClass(aj);
B(ag).one(d.TRANSITION_END,function(){B(ao).removeClass(aj+" "+ai).addClass(w.ACTIVE);
B(ag).removeClass(w.ACTIVE+" "+ai+" "+aj);
am._isSliding=false;
setTimeout(function(){return B(am._element).trigger(ar)
},0)
}).emulateTransitionEnd(D)
}else{B(ag).removeClass(w.ACTIVE);
B(ao).addClass(w.ACTIVE);
this._isSliding=false;
B(this._element).trigger(ar)
}if(an){this.cycle()
}};
aa._jQueryInterface=function T(af){return this.each(function(){var ai=B(this).data(y);
var ah=l({},A,B(this).data());
if(typeof af==="object"){ah=l({},ah,af)
}var ag=typeof af==="string"?af:ah.slide;
if(!ai){ai=new aa(this,ah);
B(this).data(y,ai)
}if(typeof af==="number"){ai.to(af)
}else{if(typeof ag==="string"){if(typeof ai[ag]==="undefined"){throw new TypeError('No method named "'+ag+'"')
}ai[ag]()
}else{if(ah.interval){ai.pause();
ai.cycle()
}}}})
};
aa._dataApiClickHandler=function V(ah){var af=d.getSelectorFromElement(this);
if(!af){return
}var aj=B(af)[0];
if(!aj||!B(aj).hasClass(w.CAROUSEL)){return
}var ag=l({},B(aj).data(),B(this).data());
var ai=this.getAttribute("data-slide-to");
if(ai){ag.interval=false
}aa._jQueryInterface.call(B(aj),ag);
if(ai){B(aj).data(y).to(ai)
}ah.preventDefault()
};
m(aa,null,[{key:"VERSION",get:function ab(){return H
}},{key:"Default",get:function ab(){return A
}}]);
return aa
}();
B(document).on(K.CLICK_DATA_API,F.DATA_SLIDE,G._dataApiClickHandler);
B(window).on(K.LOAD_DATA_API,function(){B(F.DATA_RIDE).each(function(){var L=B(this);
G._jQueryInterface.call(L,L.data())
})
});
B.fn[z]=G._jQueryInterface;
B.fn[z].Constructor=G;
B.fn[z].noConflict=function(){B.fn[z]=v;
return G._jQueryInterface
};
return G
}(c);
var b=function(A){var G="collapse";
var H="4.0.0";
var E="bs.collapse";
var v="."+E;
var D=".data-api";
var u=A.fn[G];
var y=600;
var x={toggle:true,parent:""};
var F={toggle:"boolean",parent:"(string|element)"};
var C={SHOW:"show"+v,SHOWN:"shown"+v,HIDE:"hide"+v,HIDDEN:"hidden"+v,CLICK_DATA_API:"click"+v+D};
var B={SHOW:"show",COLLAPSE:"collapse",COLLAPSING:"collapsing",COLLAPSED:"collapsed"};
var z={WIDTH:"width",HEIGHT:"height"};
var t={ACTIVES:".show, .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'};
var w=function(){function O(Z,X){this._isTransitioning=false;
this._element=Z;
this._config=this._getConfig(X);
this._triggerArray=A.makeArray(A('[data-toggle="collapse"][href="#'+Z.id+'"],'+('[data-toggle="collapse"][data-target="#'+Z.id+'"]')));
var ab=A(t.DATA_TOGGLE);
for(var Y=0;
Y<ab.length;
Y++){var aa=ab[Y];
var W=d.getSelectorFromElement(aa);
if(W!==null&&A(W).filter(Z).length>0){this._selector=W;
this._triggerArray.push(aa)
}}this._parent=this._config.parent?this._getParent():null;
if(!this._config.parent){this._addAriaAndCollapsedClass(this._element,this._triggerArray)
}if(this._config.toggle){this.toggle()
}}var Q=O.prototype;
Q.toggle=function N(){if(A(this._element).hasClass(B.SHOW)){this.hide()
}else{this.show()
}};
Q.show=function T(){var ad=this;
if(this._isTransitioning||A(this._element).hasClass(B.SHOW)){return
}var ab;
var Y;
if(this._parent){ab=A.makeArray(A(this._parent).find(t.ACTIVES).filter('[data-parent="'+this._config.parent+'"]'));
if(ab.length===0){ab=null
}}if(ab){Y=A(ab).not(this._selector).data(E);
if(Y&&Y._isTransitioning){return
}}var X=A.Event(C.SHOW);
A(this._element).trigger(X);
if(X.isDefaultPrevented()){return
}if(ab){O._jQueryInterface.call(A(ab).not(this._selector),"hide");
if(!Y){A(ab).data(E,null)
}}var ac=this._getDimension();
A(this._element).removeClass(B.COLLAPSE).addClass(B.COLLAPSING);
this._element.style[ac]=0;
if(this._triggerArray.length>0){A(this._triggerArray).removeClass(B.COLLAPSED).attr("aria-expanded",true)
}this.setTransitioning(true);
var W=function W(){A(ad._element).removeClass(B.COLLAPSING).addClass(B.COLLAPSE).addClass(B.SHOW);
ad._element.style[ac]="";
ad.setTransitioning(false);
A(ad._element).trigger(C.SHOWN)
};
if(!d.supportsTransitionEnd()){W();
return
}var aa=ac[0].toUpperCase()+ac.slice(1);
var Z="scroll"+aa;
A(this._element).one(d.TRANSITION_END,W).emulateTransitionEnd(y);
this._element.style[ac]=this._element[Z]+"px"
};
Q.hide=function P(){var ac=this;
if(this._isTransitioning||!A(this._element).hasClass(B.SHOW)){return
}var Y=A.Event(C.HIDE);
A(this._element).trigger(Y);
if(Y.isDefaultPrevented()){return
}var ad=this._getDimension();
this._element.style[ad]=this._element.getBoundingClientRect()[ad]+"px";
d.reflow(this._element);
A(this._element).addClass(B.COLLAPSING).removeClass(B.COLLAPSE).removeClass(B.SHOW);
if(this._triggerArray.length>0){for(var ab=0;
ab<this._triggerArray.length;
ab++){var aa=this._triggerArray[ab];
var W=d.getSelectorFromElement(aa);
if(W!==null){var Z=A(W);
if(!Z.hasClass(B.SHOW)){A(aa).addClass(B.COLLAPSED).attr("aria-expanded",false)
}}}}this.setTransitioning(true);
var X=function X(){ac.setTransitioning(false);
A(ac._element).removeClass(B.COLLAPSING).addClass(B.COLLAPSE).trigger(C.HIDDEN)
};
this._element.style[ad]="";
if(!d.supportsTransitionEnd()){X();
return
}A(this._element).one(d.TRANSITION_END,X).emulateTransitionEnd(y)
};
Q.setTransitioning=function L(W){this._isTransitioning=W
};
Q.dispose=function U(){A.removeData(this._element,E);
this._config=null;
this._parent=null;
this._element=null;
this._triggerArray=null;
this._isTransitioning=null
};
Q._getConfig=function S(W){W=l({},x,W);
W.toggle=Boolean(W.toggle);
d.typeCheckConfig(G,W,F);
return W
};
Q._getDimension=function V(){var W=A(this._element).hasClass(z.WIDTH);
return W?z.WIDTH:z.HEIGHT
};
Q._getParent=function K(){var Y=this;
var X=null;
if(d.isElement(this._config.parent)){X=this._config.parent;
if(typeof this._config.parent.jquery!=="undefined"){X=this._config.parent[0]
}}else{X=A(this._config.parent)[0]
}var W='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]';
A(X).find(W).each(function(aa,Z){Y._addAriaAndCollapsedClass(O._getTargetFromElement(Z),[Z])
});
return X
};
Q._addAriaAndCollapsedClass=function M(Y,W){if(Y){var X=A(Y).hasClass(B.SHOW);
if(W.length>0){A(W).toggleClass(B.COLLAPSED,!X).attr("aria-expanded",X)
}}};
O._getTargetFromElement=function R(X){var W=d.getSelectorFromElement(X);
return W?A(W)[0]:null
};
O._jQueryInterface=function J(W){return this.each(function(){var Z=A(this);
var Y=Z.data(E);
var X=l({},x,Z.data(),typeof W==="object"&&W);
if(!Y&&X.toggle&&/show|hide/.test(W)){X.toggle=false
}if(!Y){Y=new O(this,X);
Z.data(E,Y)
}if(typeof W==="string"){if(typeof Y[W]==="undefined"){throw new TypeError('No method named "'+W+'"')
}Y[W]()
}})
};
m(O,null,[{key:"VERSION",get:function I(){return H
}},{key:"Default",get:function I(){return x
}}]);
return O
}();
A(document).on(C.CLICK_DATA_API,t.DATA_TOGGLE,function(K){if(K.currentTarget.tagName==="A"){K.preventDefault()
}var J=A(this);
var I=d.getSelectorFromElement(this);
A(I).each(function(){var L=A(this);
var N=L.data(E);
var M=N?"toggle":J.data();
w._jQueryInterface.call(L,M)
})
});
A.fn[G]=w._jQueryInterface;
A.fn[G].Constructor=w;
A.fn[G].noConflict=function(){A.fn[G]=u;
return w._jQueryInterface
};
return w
}(c);
var q=function(E){var A="dropdown";
var J="4.0.0";
var z="bs.dropdown";
var G="."+z;
var v=".data-api";
var w=E.fn[A];
var u=27;
var y=32;
var B=9;
var D=38;
var N=40;
var t=3;
var L=new RegExp(D+"|"+N+"|"+u);
var M={HIDE:"hide"+G,HIDDEN:"hidden"+G,SHOW:"show"+G,SHOWN:"shown"+G,CLICK:"click"+G,CLICK_DATA_API:"click"+G+v,KEYDOWN_DATA_API:"keydown"+G+v,KEYUP_DATA_API:"keyup"+G+v};
var x={DISABLED:"disabled",SHOW:"show",DROPUP:"dropup",DROPRIGHT:"dropright",DROPLEFT:"dropleft",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",POSITION_STATIC:"position-static"};
var H={DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",MENU:".dropdown-menu",NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:".dropdown-menu .dropdown-item:not(.disabled)"};
var F={TOP:"top-start",TOPEND:"top-end",BOTTOM:"bottom-start",BOTTOMEND:"bottom-end",RIGHT:"right-start",RIGHTEND:"right-end",LEFT:"left-start",LEFTEND:"left-end"};
var C={offset:0,flip:true,boundary:"scrollParent"};
var K={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)"};
var I=function(){function aa(af,ae){this._element=af;
this._popper=null;
this._config=this._getConfig(ae);
this._menu=this._getMenuElement();
this._inNavbar=this._detectNavbar();
this._addEventListeners()
}var X=aa.prototype;
X.toggle=function U(){if(this._element.disabled||E(this._element).hasClass(x.DISABLED)){return
}var ai=aa._getParentFromElement(this._element);
var ah=E(this._menu).hasClass(x.SHOW);
aa._clearMenus();
if(ah){return
}var ae={relatedTarget:this._element};
var ag=E.Event(M.SHOW,ae);
E(ai).trigger(ag);
if(ag.isDefaultPrevented()){return
}if(!this._inNavbar){if(typeof j==="undefined"){throw new TypeError("Bootstrap dropdown require Popper.js (https://popper.js.org)")
}var af=this._element;
if(E(ai).hasClass(x.DROPUP)){if(E(this._menu).hasClass(x.MENULEFT)||E(this._menu).hasClass(x.MENURIGHT)){af=ai
}}if(this._config.boundary!=="scrollParent"){E(ai).addClass(x.POSITION_STATIC)
}this._popper=new j(af,this._menu,this._getPopperConfig())
}if("ontouchstart" in document.documentElement&&E(ai).closest(H.NAVBAR_NAV).length===0){E("body").children().on("mouseover",null,E.noop)
}this._element.focus();
this._element.setAttribute("aria-expanded",true);
E(this._menu).toggleClass(x.SHOW);
E(ai).toggleClass(x.SHOW).trigger(E.Event(M.SHOWN,ae))
};
X.dispose=function ab(){E.removeData(this._element,z);
E(this._element).off(G);
this._element=null;
this._menu=null;
if(this._popper!==null){this._popper.destroy();
this._popper=null
}};
X.update=function S(){this._inNavbar=this._detectNavbar();
if(this._popper!==null){this._popper.scheduleUpdate()
}};
X._addEventListeners=function T(){var ae=this;
E(this._element).on(M.CLICK,function(af){af.preventDefault();
af.stopPropagation();
ae.toggle()
})
};
X._getConfig=function Z(ae){ae=l({},this.constructor.Default,E(this._element).data(),ae);
d.typeCheckConfig(A,ae,this.constructor.DefaultType);
return ae
};
X._getMenuElement=function V(){if(!this._menu){var ae=aa._getParentFromElement(this._element);
this._menu=E(ae).find(H.MENU)[0]
}return this._menu
};
X._getPlacement=function ad(){var ae=E(this._element).parent();
var af=F.BOTTOM;
if(ae.hasClass(x.DROPUP)){af=F.TOP;
if(E(this._menu).hasClass(x.MENURIGHT)){af=F.TOPEND
}}else{if(ae.hasClass(x.DROPRIGHT)){af=F.RIGHT
}else{if(ae.hasClass(x.DROPLEFT)){af=F.LEFT
}else{if(E(this._menu).hasClass(x.MENURIGHT)){af=F.BOTTOMEND
}}}}return af
};
X._detectNavbar=function ac(){return E(this._element).closest(".navbar").length>0
};
X._getPopperConfig=function Y(){var af=this;
var ae={};
if(typeof this._config.offset==="function"){ae.fn=function(ah){ah.offsets=l({},ah.offsets,af._config.offset(ah.offsets)||{});
return ah
}
}else{ae.offset=this._config.offset
}var ag={placement:this._getPlacement(),modifiers:{offset:ae,flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};
return ag
};
aa._jQueryInterface=function R(ae){return this.each(function(){var ag=E(this).data(z);
var af=typeof ae==="object"?ae:null;
if(!ag){ag=new aa(this,af);
E(this).data(z,ag)
}if(typeof ae==="string"){if(typeof ag[ae]==="undefined"){throw new TypeError('No method named "'+ae+'"')
}ag[ae]()
}})
};
aa._clearMenus=function Q(ak){if(ak&&(ak.which===t||ak.type==="keyup"&&ak.which!==B)){return
}var aj=E.makeArray(E(H.DATA_TOGGLE));
for(var ah=0;
ah<aj.length;
ah++){var ai=aa._getParentFromElement(aj[ah]);
var ag=E(aj[ah]).data(z);
var ae={relatedTarget:aj[ah]};
if(!ag){continue
}var af=ag._menu;
if(!E(ai).hasClass(x.SHOW)){continue
}if(ak&&(ak.type==="click"&&/input|textarea/i.test(ak.target.tagName)||ak.type==="keyup"&&ak.which===B)&&E.contains(ai,ak.target)){continue
}var al=E.Event(M.HIDE,ae);
E(ai).trigger(al);
if(al.isDefaultPrevented()){continue
}if("ontouchstart" in document.documentElement){E("body").children().off("mouseover",null,E.noop)
}aj[ah].setAttribute("aria-expanded","false");
E(af).removeClass(x.SHOW);
E(ai).removeClass(x.SHOW).trigger(E.Event(M.HIDDEN,ae))
}};
aa._getParentFromElement=function W(af){var ag;
var ae=d.getSelectorFromElement(af);
if(ae){ag=E(ae)[0]
}return ag||af.parentNode
};
aa._dataApiKeydownHandler=function P(aj){if(/input|textarea/i.test(aj.target.tagName)?aj.which===y||aj.which!==u&&(aj.which!==N&&aj.which!==D||E(aj.target).closest(H.MENU).length):!L.test(aj.which)){return
}aj.preventDefault();
aj.stopPropagation();
if(this.disabled||E(this).hasClass(x.DISABLED)){return
}var ai=aa._getParentFromElement(this);
var ah=E(ai).hasClass(x.SHOW);
if(!ah&&(aj.which!==u||aj.which!==y)||ah&&(aj.which===u||aj.which===y)){if(aj.which===u){var ae=E(ai).find(H.DATA_TOGGLE)[0];
E(ae).trigger("focus")
}E(this).trigger("click");
return
}var af=E(ai).find(H.VISIBLE_ITEMS).get();
if(af.length===0){return
}var ag=af.indexOf(aj.target);
if(aj.which===D&&ag>0){ag--
}if(aj.which===N&&ag<af.length-1){ag++
}if(ag<0){ag=0
}af[ag].focus()
};
m(aa,null,[{key:"VERSION",get:function O(){return J
}},{key:"Default",get:function O(){return C
}},{key:"DefaultType",get:function O(){return K
}}]);
return aa
}();
E(document).on(M.KEYDOWN_DATA_API,H.DATA_TOGGLE,I._dataApiKeydownHandler).on(M.KEYDOWN_DATA_API,H.MENU,I._dataApiKeydownHandler).on(M.CLICK_DATA_API+" "+M.KEYUP_DATA_API,I._clearMenus).on(M.CLICK_DATA_API,H.DATA_TOGGLE,function(O){O.preventDefault();
O.stopPropagation();
I._jQueryInterface.call(E(this),"toggle")
}).on(M.CLICK_DATA_API,H.FORM_CHILD,function(O){O.stopPropagation()
});
E.fn[A]=I._jQueryInterface;
E.fn[A].Constructor=I;
E.fn[A].noConflict=function(){E.fn[A]=w;
return I._jQueryInterface
};
return I
}(c,j);
var a=function(A){var H="modal";
var I="4.0.0";
var F="bs.modal";
var v="."+F;
var E=".data-api";
var u=A.fn[H];
var y=300;
var D=150;
var x=27;
var w={backdrop:true,keyboard:true,focus:true,show:true};
var G={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"};
var C={HIDE:"hide"+v,HIDDEN:"hidden"+v,SHOW:"show"+v,SHOWN:"shown"+v,FOCUSIN:"focusin"+v,RESIZE:"resize"+v,CLICK_DISMISS:"click.dismiss"+v,KEYDOWN_DISMISS:"keydown.dismiss"+v,MOUSEUP_DISMISS:"mouseup.dismiss"+v,MOUSEDOWN_DISMISS:"mousedown.dismiss"+v,CLICK_DATA_API:"click"+v+E};
var B={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",SHOW:"show"};
var t={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};
var z=function(){function J(ah,ag){this._config=this._getConfig(ag);
this._element=ah;
this._dialog=A(ah).find(t.DIALOG)[0];
this._backdrop=null;
this._isShown=false;
this._isBodyOverflowing=false;
this._ignoreBackdropClick=false;
this._originalBodyPadding=0;
this._scrollbarWidth=0
}var M=J.prototype;
M.toggle=function aa(ag){return this._isShown?this.hide():this.show(ag)
};
M.show=function ad(ag){var ai=this;
if(this._isTransitioning||this._isShown){return
}if(d.supportsTransitionEnd()&&A(this._element).hasClass(B.FADE)){this._isTransitioning=true
}var ah=A.Event(C.SHOW,{relatedTarget:ag});
A(this._element).trigger(ah);
if(this._isShown||ah.isDefaultPrevented()){return
}this._isShown=true;
this._checkScrollbar();
this._setScrollbar();
this._adjustDialog();
A(document.body).addClass(B.OPEN);
this._setEscapeEvent();
this._setResizeEvent();
A(this._element).on(C.CLICK_DISMISS,t.DATA_DISMISS,function(aj){return ai.hide(aj)
});
A(this._dialog).on(C.MOUSEDOWN_DISMISS,function(){A(ai._element).one(C.MOUSEUP_DISMISS,function(aj){if(A(aj.target).is(ai._element)){ai._ignoreBackdropClick=true
}})
});
this._showBackdrop(function(){return ai._showElement(ag)
})
};
M.hide=function T(ah){var ag=this;
if(ah){ah.preventDefault()
}if(this._isTransitioning||!this._isShown){return
}var ai=A.Event(C.HIDE);
A(this._element).trigger(ai);
if(!this._isShown||ai.isDefaultPrevented()){return
}this._isShown=false;
var aj=d.supportsTransitionEnd()&&A(this._element).hasClass(B.FADE);
if(aj){this._isTransitioning=true
}this._setEscapeEvent();
this._setResizeEvent();
A(document).off(C.FOCUSIN);
A(this._element).removeClass(B.SHOW);
A(this._element).off(C.CLICK_DISMISS);
A(this._dialog).off(C.MOUSEDOWN_DISMISS);
if(aj){A(this._element).one(d.TRANSITION_END,function(ak){return ag._hideModal(ak)
}).emulateTransitionEnd(y)
}else{this._hideModal()
}};
M.dispose=function af(){A.removeData(this._element,F);
A(window,document,this._element,this._backdrop).off(v);
this._config=null;
this._element=null;
this._dialog=null;
this._backdrop=null;
this._isShown=null;
this._isBodyOverflowing=null;
this._ignoreBackdropClick=null;
this._scrollbarWidth=null
};
M.handleUpdate=function R(){this._adjustDialog()
};
M._getConfig=function N(ag){ag=l({},w,ag);
d.typeCheckConfig(H,ag,G);
return ag
};
M._showElement=function ae(ah){var aj=this;
var ak=d.supportsTransitionEnd()&&A(this._element).hasClass(B.FADE);
if(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE){document.body.appendChild(this._element)
}this._element.style.display="block";
this._element.removeAttribute("aria-hidden");
this._element.scrollTop=0;
if(ak){d.reflow(this._element)
}A(this._element).addClass(B.SHOW);
if(this._config.focus){this._enforceFocus()
}var ag=A.Event(C.SHOWN,{relatedTarget:ah});
var ai=function ai(){if(aj._config.focus){aj._element.focus()
}aj._isTransitioning=false;
A(aj._element).trigger(ag)
};
if(ak){A(this._dialog).one(d.TRANSITION_END,ai).emulateTransitionEnd(y)
}else{ai()
}};
M._enforceFocus=function L(){var ag=this;
A(document).off(C.FOCUSIN).on(C.FOCUSIN,function(ah){if(document!==ah.target&&ag._element!==ah.target&&A(ag._element).has(ah.target).length===0){ag._element.focus()
}})
};
M._setEscapeEvent=function Q(){var ag=this;
if(this._isShown&&this._config.keyboard){A(this._element).on(C.KEYDOWN_DISMISS,function(ah){if(ah.which===x){ah.preventDefault();
ag.hide()
}})
}else{if(!this._isShown){A(this._element).off(C.KEYDOWN_DISMISS)
}}};
M._setResizeEvent=function W(){var ag=this;
if(this._isShown){A(window).on(C.RESIZE,function(ah){return ag.handleUpdate(ah)
})
}else{A(window).off(C.RESIZE)
}};
M._hideModal=function ab(){var ag=this;
this._element.style.display="none";
this._element.setAttribute("aria-hidden",true);
this._isTransitioning=false;
this._showBackdrop(function(){A(document.body).removeClass(B.OPEN);
ag._resetAdjustments();
ag._resetScrollbar();
A(ag._element).trigger(C.HIDDEN)
})
};
M._removeBackdrop=function O(){if(this._backdrop){A(this._backdrop).remove();
this._backdrop=null
}};
M._showBackdrop=function P(ak){var ah=this;
var ai=A(this._element).hasClass(B.FADE)?B.FADE:"";
if(this._isShown&&this._config.backdrop){var ag=d.supportsTransitionEnd()&&ai;
this._backdrop=document.createElement("div");
this._backdrop.className=B.BACKDROP;
if(ai){A(this._backdrop).addClass(ai)
}A(this._backdrop).appendTo(document.body);
A(this._element).on(C.CLICK_DISMISS,function(al){if(ah._ignoreBackdropClick){ah._ignoreBackdropClick=false;
return
}if(al.target!==al.currentTarget){return
}if(ah._config.backdrop==="static"){ah._element.focus()
}else{ah.hide()
}});
if(ag){d.reflow(this._backdrop)
}A(this._backdrop).addClass(B.SHOW);
if(!ak){return
}if(!ag){ak();
return
}A(this._backdrop).one(d.TRANSITION_END,ak).emulateTransitionEnd(D)
}else{if(!this._isShown&&this._backdrop){A(this._backdrop).removeClass(B.SHOW);
var aj=function aj(){ah._removeBackdrop();
if(ak){ak()
}};
if(d.supportsTransitionEnd()&&A(this._element).hasClass(B.FADE)){A(this._backdrop).one(d.TRANSITION_END,aj).emulateTransitionEnd(D)
}else{aj()
}}else{if(ak){ak()
}}}};
M._adjustDialog=function Y(){var ag=this._element.scrollHeight>document.documentElement.clientHeight;
if(!this._isBodyOverflowing&&ag){this._element.style.paddingLeft=this._scrollbarWidth+"px"
}if(this._isBodyOverflowing&&!ag){this._element.style.paddingRight=this._scrollbarWidth+"px"
}};
M._resetAdjustments=function V(){this._element.style.paddingLeft="";
this._element.style.paddingRight=""
};
M._checkScrollbar=function X(){var ag=document.body.getBoundingClientRect();
this._isBodyOverflowing=ag.left+ag.right<window.innerWidth;
this._scrollbarWidth=this._getScrollbarWidth()
};
M._setScrollbar=function Z(){var ai=this;
if(this._isBodyOverflowing){A(t.FIXED_CONTENT).each(function(ak,al){var aj=A(al)[0].style.paddingRight;
var am=A(al).css("padding-right");
A(al).data("padding-right",aj).css("padding-right",parseFloat(am)+ai._scrollbarWidth+"px")
});
A(t.STICKY_CONTENT).each(function(ak,al){var am=A(al)[0].style.marginRight;
var aj=A(al).css("margin-right");
A(al).data("margin-right",am).css("margin-right",parseFloat(aj)-ai._scrollbarWidth+"px")
});
A(t.NAVBAR_TOGGLER).each(function(ak,al){var am=A(al)[0].style.marginRight;
var aj=A(al).css("margin-right");
A(al).data("margin-right",am).css("margin-right",parseFloat(aj)+ai._scrollbarWidth+"px")
});
var ag=document.body.style.paddingRight;
var ah=A("body").css("padding-right");
A("body").data("padding-right",ag).css("padding-right",parseFloat(ah)+this._scrollbarWidth+"px")
}};
M._resetScrollbar=function U(){A(t.FIXED_CONTENT).each(function(ah,ai){var aj=A(ai).data("padding-right");
if(typeof aj!=="undefined"){A(ai).css("padding-right",aj).removeData("padding-right")
}});
A(t.STICKY_CONTENT+", "+t.NAVBAR_TOGGLER).each(function(ah,ai){var aj=A(ai).data("margin-right");
if(typeof aj!=="undefined"){A(ai).css("margin-right",aj).removeData("margin-right")
}});
var ag=A("body").data("padding-right");
if(typeof ag!=="undefined"){A("body").css("padding-right",ag).removeData("padding-right")
}};
M._getScrollbarWidth=function K(){var ah=document.createElement("div");
ah.className=B.SCROLLBAR_MEASURER;
document.body.appendChild(ah);
var ag=ah.getBoundingClientRect().width-ah.clientWidth;
document.body.removeChild(ah);
return ag
};
J._jQueryInterface=function S(ah,ag){return this.each(function(){var aj=A(this).data(F);
var ai=l({},J.Default,A(this).data(),typeof ah==="object"&&ah);
if(!aj){aj=new J(this,ai);
A(this).data(F,aj)
}if(typeof ah==="string"){if(typeof aj[ah]==="undefined"){throw new TypeError('No method named "'+ah+'"')
}aj[ah](ag)
}else{if(ai.show){aj.show(ag)
}}})
};
m(J,null,[{key:"VERSION",get:function ac(){return I
}},{key:"Default",get:function ac(){return w
}}]);
return J
}();
A(document).on(C.CLICK_DATA_API,t.DATA_TOGGLE,function(M){var O=this;
var N;
var K=d.getSelectorFromElement(this);
if(K){N=A(K)[0]
}var L=A(N).data(F)?"toggle":l({},A(N).data(),A(this).data());
if(this.tagName==="A"||this.tagName==="AREA"){M.preventDefault()
}var J=A(N).one(C.SHOW,function(P){if(P.isDefaultPrevented()){return
}J.one(C.HIDDEN,function(){if(A(O).is(":visible")){O.focus()
}})
});
z._jQueryInterface.call(A(N),L,this)
});
A.fn[H]=z._jQueryInterface;
A.fn[H].Constructor=z;
A.fn[H].noConflict=function(){A.fn[H]=u;
return z._jQueryInterface
};
return z
}(c);
var o=function(A){var y="tooltip";
var H="4.0.0";
var x="bs.tooltip";
var C="."+x;
var t=A.fn[y];
var E=150;
var D="bs-tooltip";
var K=new RegExp("(^|\\s)"+D+"\\S+","g");
var I={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)"};
var B={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"};
var z={animation:true,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,selector:false,placement:"top",offset:0,container:false,fallbackPlacement:"flip",boundary:"scrollParent"};
var v={SHOW:"show",OUT:"out"};
var J={HIDE:"hide"+C,HIDDEN:"hidden"+C,SHOW:"show"+C,SHOWN:"shown"+C,INSERTED:"inserted"+C,CLICK:"click"+C,FOCUSIN:"focusin"+C,FOCUSOUT:"focusout"+C,MOUSEENTER:"mouseenter"+C,MOUSELEAVE:"mouseleave"+C};
var w={FADE:"fade",SHOW:"show"};
var F={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner",ARROW:".arrow"};
var u={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"};
var G=function(){function ah(ap,ao){if(typeof j==="undefined"){throw new TypeError("Bootstrap tooltips require Popper.js (https://popper.js.org)")
}this._isEnabled=true;
this._timeout=0;
this._hoverState="";
this._activeTrigger={};
this._popper=null;
this.element=ap;
this.config=this._getConfig(ao);
this.tip=null;
this._setListeners()
}var O=ah.prototype;
O.enable=function ab(){this._isEnabled=true
};
O.disable=function M(){this._isEnabled=false
};
O.toggleEnabled=function W(){this._isEnabled=!this._isEnabled
};
O.toggle=function ae(ap){if(!this._isEnabled){return
}if(ap){var aq=this.constructor.DATA_KEY;
var ao=A(ap.currentTarget).data(aq);
if(!ao){ao=new this.constructor(ap.currentTarget,this._getDelegateConfig());
A(ap.currentTarget).data(aq,ao)
}ao._activeTrigger.click=!ao._activeTrigger.click;
if(ao._isWithActiveTrigger()){ao._enter(null,ao)
}else{ao._leave(null,ao)
}}else{if(A(this.getTipElement()).hasClass(w.SHOW)){this._leave(null,this);
return
}this._enter(null,this)
}};
O.dispose=function an(){clearTimeout(this._timeout);
A.removeData(this.element,this.constructor.DATA_KEY);
A(this.element).off(this.constructor.EVENT_KEY);
A(this.element).closest(".modal").off("hide.bs.modal");
if(this.tip){A(this.tip).remove()
}this._isEnabled=null;
this._timeout=null;
this._hoverState=null;
this._activeTrigger=null;
if(this._popper!==null){this._popper.destroy()
}this._popper=null;
this.element=null;
this.config=null;
this.tip=null
};
O.show=function ak(){var ax=this;
if(A(this.element).css("display")==="none"){throw new Error("Please use show on visible elements")
}var ay=A.Event(this.constructor.Event.SHOW);
if(this.isWithContent()&&this._isEnabled){A(this.element).trigger(ay);
var at=A.contains(this.element.ownerDocument.documentElement,this.element);
if(ay.isDefaultPrevented()||!at){return
}var az=this.getTipElement();
var aq=d.getUID(this.constructor.NAME);
az.setAttribute("id",aq);
this.element.setAttribute("aria-describedby",aq);
this.setContent();
if(this.config.animation){A(az).addClass(w.FADE)
}var av=typeof this.config.placement==="function"?this.config.placement.call(this,az,this.element):this.config.placement;
var aw=this._getAttachment(av);
this.addAttachmentClass(aw);
var ao=this.config.container===false?document.body:A(this.config.container);
A(az).data(this.constructor.DATA_KEY,this);
if(!A.contains(this.element.ownerDocument.documentElement,this.tip)){A(az).appendTo(ao)
}A(this.element).trigger(this.constructor.Event.INSERTED);
this._popper=new j(this.element,az,{placement:aw,modifiers:{offset:{offset:this.config.offset},flip:{behavior:this.config.fallbackPlacement},arrow:{element:F.ARROW},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function au(aA){if(aA.originalPlacement!==aA.placement){ax._handlePopperPlacementChange(aA)
}},onUpdate:function ar(aA){ax._handlePopperPlacementChange(aA)
}});
A(az).addClass(w.SHOW);
if("ontouchstart" in document.documentElement){A("body").children().on("mouseover",null,A.noop)
}var ap=function ap(){if(ax.config.animation){ax._fixTransition()
}var aA=ax._hoverState;
ax._hoverState=null;
A(ax.element).trigger(ax.constructor.Event.SHOWN);
if(aA===v.OUT){ax._leave(null,ax)
}};
if(d.supportsTransitionEnd()&&A(this.tip).hasClass(w.FADE)){A(this.tip).one(d.TRANSITION_END,ap).emulateTransitionEnd(ah._TRANSITION_DURATION)
}else{ap()
}}};
O.hide=function aa(at){var ap=this;
var aq=this.getTipElement();
var ar=A.Event(this.constructor.Event.HIDE);
var ao=function ao(){if(ap._hoverState!==v.SHOW&&aq.parentNode){aq.parentNode.removeChild(aq)
}ap._cleanTipClass();
ap.element.removeAttribute("aria-describedby");
A(ap.element).trigger(ap.constructor.Event.HIDDEN);
if(ap._popper!==null){ap._popper.destroy()
}if(at){at()
}};
A(this.element).trigger(ar);
if(ar.isDefaultPrevented()){return
}A(aq).removeClass(w.SHOW);
if("ontouchstart" in document.documentElement){A("body").children().off("mouseover",null,A.noop)
}this._activeTrigger[u.CLICK]=false;
this._activeTrigger[u.FOCUS]=false;
this._activeTrigger[u.HOVER]=false;
if(d.supportsTransitionEnd()&&A(this.tip).hasClass(w.FADE)){A(aq).one(d.TRANSITION_END,ao).emulateTransitionEnd(E)
}else{ao()
}this._hoverState=""
};
O.update=function T(){if(this._popper!==null){this._popper.scheduleUpdate()
}};
O.isWithContent=function af(){return Boolean(this.getTitle())
};
O.addAttachmentClass=function V(ao){A(this.getTipElement()).addClass(D+"-"+ao)
};
O.getTipElement=function ai(){this.tip=this.tip||A(this.config.template)[0];
return this.tip
};
O.setContent=function R(){var ao=A(this.getTipElement());
this.setElementContent(ao.find(F.TOOLTIP_INNER),this.getTitle());
ao.removeClass(w.FADE+" "+w.SHOW)
};
O.setElementContent=function ad(ao,aq){var ap=this.config.html;
if(typeof aq==="object"&&(aq.nodeType||aq.jquery)){if(ap){if(!A(aq).parent().is(ao)){ao.empty().append(aq)
}}else{ao.text(A(aq).text())
}}else{ao[ap?"html":"text"](aq)
}};
O.getTitle=function X(){var ao=this.element.getAttribute("data-original-title");
if(!ao){ao=typeof this.config.title==="function"?this.config.title.call(this.element):this.config.title
}return ao
};
O._getAttachment=function am(ao){return B[ao.toUpperCase()]
};
O._setListeners=function ag(){var ap=this;
var ao=this.config.trigger.split(" ");
ao.forEach(function(ar){if(ar==="click"){A(ap.element).on(ap.constructor.Event.CLICK,ap.config.selector,function(au){return ap.toggle(au)
})
}else{if(ar!==u.MANUAL){var at=ar===u.HOVER?ap.constructor.Event.MOUSEENTER:ap.constructor.Event.FOCUSIN;
var aq=ar===u.HOVER?ap.constructor.Event.MOUSELEAVE:ap.constructor.Event.FOCUSOUT;
A(ap.element).on(at,ap.config.selector,function(au){return ap._enter(au)
}).on(aq,ap.config.selector,function(au){return ap._leave(au)
})
}}A(ap.element).closest(".modal").on("hide.bs.modal",function(){return ap.hide()
})
});
if(this.config.selector){this.config=l({},this.config,{trigger:"manual",selector:""})
}else{this._fixTitle()
}};
O._fixTitle=function S(){var ao=typeof this.element.getAttribute("data-original-title");
if(this.element.getAttribute("title")||ao!=="string"){this.element.setAttribute("data-original-title",this.element.getAttribute("title")||"");
this.element.setAttribute("title","")
}};
O._enter=function U(ap,ao){var aq=this.constructor.DATA_KEY;
ao=ao||A(ap.currentTarget).data(aq);
if(!ao){ao=new this.constructor(ap.currentTarget,this._getDelegateConfig());
A(ap.currentTarget).data(aq,ao)
}if(ap){ao._activeTrigger[ap.type==="focusin"?u.FOCUS:u.HOVER]=true
}if(A(ao.getTipElement()).hasClass(w.SHOW)||ao._hoverState===v.SHOW){ao._hoverState=v.SHOW;
return
}clearTimeout(ao._timeout);
ao._hoverState=v.SHOW;
if(!ao.config.delay||!ao.config.delay.show){ao.show();
return
}ao._timeout=setTimeout(function(){if(ao._hoverState===v.SHOW){ao.show()
}},ao.config.delay.show)
};
O._leave=function al(ap,ao){var aq=this.constructor.DATA_KEY;
ao=ao||A(ap.currentTarget).data(aq);
if(!ao){ao=new this.constructor(ap.currentTarget,this._getDelegateConfig());
A(ap.currentTarget).data(aq,ao)
}if(ap){ao._activeTrigger[ap.type==="focusout"?u.FOCUS:u.HOVER]=false
}if(ao._isWithActiveTrigger()){return
}clearTimeout(ao._timeout);
ao._hoverState=v.OUT;
if(!ao.config.delay||!ao.config.delay.hide){ao.hide();
return
}ao._timeout=setTimeout(function(){if(ao._hoverState===v.OUT){ao.hide()
}},ao.config.delay.hide)
};
O._isWithActiveTrigger=function N(){for(var ao in this._activeTrigger){if(this._activeTrigger[ao]){return true
}}return false
};
O._getConfig=function P(ao){ao=l({},this.constructor.Default,A(this.element).data(),ao);
if(typeof ao.delay==="number"){ao.delay={show:ao.delay,hide:ao.delay}
}if(typeof ao.title==="number"){ao.title=ao.title.toString()
}if(typeof ao.content==="number"){ao.content=ao.content.toString()
}d.typeCheckConfig(y,ao,this.constructor.DefaultType);
return ao
};
O._getDelegateConfig=function Z(){var ao={};
if(this.config){for(var ap in this.config){if(this.constructor.Default[ap]!==this.config[ap]){ao[ap]=this.config[ap]
}}}return ao
};
O._cleanTipClass=function ac(){var ap=A(this.getTipElement());
var ao=ap.attr("class").match(K);
if(ao!==null&&ao.length>0){ap.removeClass(ao.join(""))
}};
O._handlePopperPlacementChange=function Q(ao){this._cleanTipClass();
this.addAttachmentClass(this._getAttachment(ao.placement))
};
O._fixTransition=function L(){var ap=this.getTipElement();
var ao=this.config.animation;
if(ap.getAttribute("x-placement")!==null){return
}A(ap).removeClass(w.FADE);
this.config.animation=false;
this.hide();
this.show();
this.config.animation=ao
};
ah._jQueryInterface=function Y(ao){return this.each(function(){var aq=A(this).data(x);
var ap=typeof ao==="object"&&ao;
if(!aq&&/dispose|hide/.test(ao)){return
}if(!aq){aq=new ah(this,ap);
A(this).data(x,aq)
}if(typeof ao==="string"){if(typeof aq[ao]==="undefined"){throw new TypeError('No method named "'+ao+'"')
}aq[ao]()
}})
};
m(ah,null,[{key:"VERSION",get:function aj(){return H
}},{key:"Default",get:function aj(){return z
}},{key:"NAME",get:function aj(){return y
}},{key:"DATA_KEY",get:function aj(){return x
}},{key:"Event",get:function aj(){return J
}},{key:"EVENT_KEY",get:function aj(){return C
}},{key:"DefaultType",get:function aj(){return I
}}]);
return ah
}();
A.fn[y]=G._jQueryInterface;
A.fn[y].Constructor=G;
A.fn[y].noConflict=function(){A.fn[y]=t;
return G._jQueryInterface
};
return G
}(c,j);
var r=function(A){var F="popover";
var G="4.0.0";
var D="bs.popover";
var w="."+D;
var u=A.fn[F];
var v="bs-popover";
var y=new RegExp("(^|\\s)"+v+"\\S+","g");
var z=l({},o.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'});
var E=l({},o.DefaultType,{content:"(string|element|function)"});
var B={FADE:"fade",SHOW:"show"};
var t={TITLE:".popover-header",CONTENT:".popover-body"};
var C={HIDE:"hide"+w,HIDDEN:"hidden"+w,SHOW:"show"+w,SHOWN:"shown"+w,INSERTED:"inserted"+w,CLICK:"click"+w,FOCUSIN:"focusin"+w,FOCUSOUT:"focusout"+w,MOUSEENTER:"mouseenter"+w,MOUSELEAVE:"mouseleave"+w};
var x=function(P){k(L,P);
function L(){return P.apply(this,arguments)||this
}var Q=L.prototype;
Q.isWithContent=function N(){return this.getTitle()||this._getContent()
};
Q.addAttachmentClass=function R(S){A(this.getTipElement()).addClass(v+"-"+S)
};
Q.getTipElement=function M(){this.tip=this.tip||A(this.config.template)[0];
return this.tip
};
Q.setContent=function J(){var T=A(this.getTipElement());
this.setElementContent(T.find(t.TITLE),this.getTitle());
var S=this._getContent();
if(typeof S==="function"){S=S.call(this.element)
}this.setElementContent(T.find(t.CONTENT),S);
T.removeClass(B.FADE+" "+B.SHOW)
};
Q._getContent=function O(){return this.element.getAttribute("data-content")||this.config.content
};
Q._cleanTipClass=function I(){var T=A(this.getTipElement());
var S=T.attr("class").match(y);
if(S!==null&&S.length>0){T.removeClass(S.join(""))
}};
L._jQueryInterface=function K(S){return this.each(function(){var U=A(this).data(D);
var T=typeof S==="object"?S:null;
if(!U&&/destroy|hide/.test(S)){return
}if(!U){U=new L(this,T);
A(this).data(D,U)
}if(typeof S==="string"){if(typeof U[S]==="undefined"){throw new TypeError('No method named "'+S+'"')
}U[S]()
}})
};
m(L,null,[{key:"VERSION",get:function H(){return G
}},{key:"Default",get:function H(){return z
}},{key:"NAME",get:function H(){return F
}},{key:"DATA_KEY",get:function H(){return D
}},{key:"Event",get:function H(){return C
}},{key:"EVENT_KEY",get:function H(){return w
}},{key:"DefaultType",get:function H(){return E
}}]);
return L
}(o);
A.fn[F]=x._jQueryInterface;
A.fn[F].Constructor=x;
A.fn[F].noConflict=function(){A.fn[F]=u;
return x._jQueryInterface
};
return x
}(c);
var p=function(y){var F="scrollspy";
var G="4.0.0";
var C="bs.scrollspy";
var v="."+C;
var B=".data-api";
var u=y.fn[F];
var x={offset:10,method:"auto",target:""};
var E={offset:"number",method:"string",target:"(string|element)"};
var A={ACTIVATE:"activate"+v,SCROLL:"scroll"+v,LOAD_DATA_API:"load"+v+B};
var z={DROPDOWN_ITEM:"dropdown-item",DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active"};
var t={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",NAV_LIST_GROUP:".nav, .list-group",NAV_LINKS:".nav-link",NAV_ITEMS:".nav-item",LIST_ITEMS:".list-group-item",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"};
var D={OFFSET:"offset",POSITION:"position"};
var w=function(){function M(V,U){var W=this;
this._element=V;
this._scrollElement=V.tagName==="BODY"?window:V;
this._config=this._getConfig(U);
this._selector=this._config.target+" "+t.NAV_LINKS+","+(this._config.target+" "+t.LIST_ITEMS+",")+(this._config.target+" "+t.DROPDOWN_ITEMS);
this._offsets=[];
this._targets=[];
this._activeTarget=null;
this._scrollHeight=0;
y(this._scrollElement).on(A.SCROLL,function(X){return W._process(X)
});
this.refresh();
this._process()
}var Q=M.prototype;
Q.refresh=function P(){var Y=this;
var W=this._scrollElement===this._scrollElement.window?D.OFFSET:D.POSITION;
var U=this._config.method==="auto"?W:this._config.method;
var X=U===D.POSITION?this._getScrollTop():0;
this._offsets=[];
this._targets=[];
this._scrollHeight=this._getScrollHeight();
var V=y.makeArray(y(this._selector));
V.map(function(Z){var ac;
var aa=d.getSelectorFromElement(Z);
if(aa){ac=y(aa)[0]
}if(ac){var ab=ac.getBoundingClientRect();
if(ab.width||ab.height){return[y(ac)[U]().top+X,aa]
}}return null
}).filter(function(Z){return Z
}).sort(function(aa,Z){return aa[0]-Z[0]
}).forEach(function(Z){Y._offsets.push(Z[0]);
Y._targets.push(Z[1])
})
};
Q.dispose=function T(){y.removeData(this._element,C);
y(this._scrollElement).off(v);
this._element=null;
this._scrollElement=null;
this._config=null;
this._selector=null;
this._offsets=null;
this._targets=null;
this._activeTarget=null;
this._scrollHeight=null
};
Q._getConfig=function R(U){U=l({},x,U);
if(typeof U.target!=="string"){var V=y(U.target).attr("id");
if(!V){V=d.getUID(F);
y(U.target).attr("id",V)
}U.target="#"+V
}d.typeCheckConfig(F,U,E);
return U
};
Q._getScrollTop=function S(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop
};
Q._getScrollHeight=function I(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)
};
Q._getOffsetHeight=function K(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height
};
Q._process=function H(){var Z=this._getScrollTop()+this._config.offset;
var V=this._getScrollHeight();
var W=this._config.offset+V-this._getOffsetHeight();
if(this._scrollHeight!==V){this.refresh()
}if(Z>=W){var Y=this._targets[this._targets.length-1];
if(this._activeTarget!==Y){this._activate(Y)
}return
}if(this._activeTarget&&Z<this._offsets[0]&&this._offsets[0]>0){this._activeTarget=null;
this._clear();
return
}for(var U=this._offsets.length;
U--;
){var X=this._activeTarget!==this._targets[U]&&Z>=this._offsets[U]&&(typeof this._offsets[U+1]==="undefined"||Z<this._offsets[U+1]);
if(X){this._activate(this._targets[U])
}}};
Q._activate=function N(W){this._activeTarget=W;
this._clear();
var V=this._selector.split(",");
V=V.map(function(X){return X+'[data-target="'+W+'"],'+(X+'[href="'+W+'"]')
});
var U=y(V.join(","));
if(U.hasClass(z.DROPDOWN_ITEM)){U.closest(t.DROPDOWN).find(t.DROPDOWN_TOGGLE).addClass(z.ACTIVE);
U.addClass(z.ACTIVE)
}else{U.addClass(z.ACTIVE);
U.parents(t.NAV_LIST_GROUP).prev(t.NAV_LINKS+", "+t.LIST_ITEMS).addClass(z.ACTIVE);
U.parents(t.NAV_LIST_GROUP).prev(t.NAV_ITEMS).children(t.NAV_LINKS).addClass(z.ACTIVE)
}y(this._scrollElement).trigger(A.ACTIVATE,{relatedTarget:W})
};
Q._clear=function O(){y(this._selector).filter(t.ACTIVE).removeClass(z.ACTIVE)
};
M._jQueryInterface=function L(U){return this.each(function(){var W=y(this).data(C);
var V=typeof U==="object"&&U;
if(!W){W=new M(this,V);
y(this).data(C,W)
}if(typeof U==="string"){if(typeof W[U]==="undefined"){throw new TypeError('No method named "'+U+'"')
}W[U]()
}})
};
m(M,null,[{key:"VERSION",get:function J(){return G
}},{key:"Default",get:function J(){return x
}}]);
return M
}();
y(window).on(A.LOAD_DATA_API,function(){var I=y.makeArray(y(t.DATA_SPY));
for(var H=I.length;
H--;
){var J=y(I[H]);
w._jQueryInterface.call(J,J.data())
}});
y.fn[F]=w._jQueryInterface;
y.fn[F].Constructor=w;
y.fn[F].noConflict=function(){y.fn[F]=u;
return w._jQueryInterface
};
return w
}(c);
var f=function(y){var D="tab";
var E="4.0.0";
var C="bs.tab";
var v="."+C;
var B=".data-api";
var u=y.fn[D];
var x=150;
var A={HIDE:"hide"+v,HIDDEN:"hidden"+v,SHOW:"show"+v,SHOWN:"shown"+v,CLICK_DATA_API:"click"+v+B};
var z={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",DISABLED:"disabled",FADE:"fade",SHOW:"show"};
var t={DROPDOWN:".dropdown",NAV_LIST_GROUP:".nav, .list-group",ACTIVE:".active",ACTIVE_UL:"> li > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"};
var w=function(){function H(N){this._element=N
}var G=H.prototype;
G.show=function F(){var S=this;
if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&y(this._element).hasClass(z.ACTIVE)||y(this._element).hasClass(z.DISABLED)){return
}var T;
var R;
var V=y(this._element).closest(t.NAV_LIST_GROUP)[0];
var Q=d.getSelectorFromElement(this._element);
if(V){var O=V.nodeName==="UL"?t.ACTIVE_UL:t.ACTIVE;
R=y.makeArray(y(V).find(O));
R=R[R.length-1]
}var P=y.Event(A.HIDE,{relatedTarget:this._element});
var U=y.Event(A.SHOW,{relatedTarget:R});
if(R){y(R).trigger(P)
}y(this._element).trigger(U);
if(U.isDefaultPrevented()||P.isDefaultPrevented()){return
}if(Q){T=y(Q)[0]
}this._activate(this._element,V);
var N=function N(){var X=y.Event(A.HIDDEN,{relatedTarget:S._element});
var W=y.Event(A.SHOWN,{relatedTarget:R});
y(R).trigger(X);
y(S._element).trigger(W)
};
if(T){this._activate(T,T.parentNode,N)
}else{N()
}};
G.dispose=function M(){y.removeData(this._element,C);
this._element=null
};
G._activate=function L(P,O,U){var Q=this;
var S;
if(O.nodeName==="UL"){S=y(O).find(t.ACTIVE_UL)
}else{S=y(O).children(t.ACTIVE)
}var R=S[0];
var T=U&&d.supportsTransitionEnd()&&R&&y(R).hasClass(z.FADE);
var N=function N(){return Q._transitionComplete(P,R,U)
};
if(R&&T){y(R).one(d.TRANSITION_END,N).emulateTransitionEnd(x)
}else{N()
}};
G._transitionComplete=function K(N,P,R){if(P){y(P).removeClass(z.SHOW+" "+z.ACTIVE);
var Q=y(P.parentNode).find(t.DROPDOWN_ACTIVE_CHILD)[0];
if(Q){y(Q).removeClass(z.ACTIVE)
}if(P.getAttribute("role")==="tab"){P.setAttribute("aria-selected",false)
}}y(N).addClass(z.ACTIVE);
if(N.getAttribute("role")==="tab"){N.setAttribute("aria-selected",true)
}d.reflow(N);
y(N).addClass(z.SHOW);
if(N.parentNode&&y(N.parentNode).hasClass(z.DROPDOWN_MENU)){var O=y(N).closest(t.DROPDOWN)[0];
if(O){y(O).find(t.DROPDOWN_TOGGLE).addClass(z.ACTIVE)
}N.setAttribute("aria-expanded",true)
}if(R){R()
}};
H._jQueryInterface=function J(N){return this.each(function(){var P=y(this);
var O=P.data(C);
if(!O){O=new H(this);
P.data(C,O)
}if(typeof N==="string"){if(typeof O[N]==="undefined"){throw new TypeError('No method named "'+N+'"')
}O[N]()
}})
};
m(H,null,[{key:"VERSION",get:function I(){return E
}}]);
return H
}();
y(document).on(A.CLICK_DATA_API,t.DATA_TOGGLE,function(F){F.preventDefault();
w._jQueryInterface.call(y(this),"show")
});
y.fn[D]=w._jQueryInterface;
y.fn[D].Constructor=w;
y.fn[D].noConflict=function(){y.fn[D]=u;
return w._jQueryInterface
};
return w
}(c);
(function(u){if(typeof u==="undefined"){throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.")
}var t=u.fn.jquery.split(" ")[0].split(".");
var w=1;
var v=2;
var y=9;
var z=1;
var x=4;
if(t[0]<v&&t[1]<y||t[0]===w&&t[1]===y&&t[2]<z||t[0]>=x){throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")
}})(c);
s.Util=d;
s.Alert=g;
s.Button=h;
s.Carousel=n;
s.Collapse=b;
s.Dropdown=q;
s.Modal=a;
s.Popover=r;
s.Scrollspy=p;
s.Tab=f;
s.Tooltip=o;
Object.defineProperty(s,"__esModule",{value:true})
})));
(function(){if(!$(".blog-page .article").length){return
}var g=document.querySelectorAll(".blog-page .article blockquote");
for(var b=0;
b<g.length;
b++){var a=g[b];
var e=a.classList.contains("no-float");
var c=a.parentNode;
var f=document.createElement("div");
f.className=(e?"":"fl-ns block-quote nl6rem-md ")+"mr4 mr5-ns mv4 cru-bahama-blue measure-l lh-title";
var d=document.createElement("h3");
d.className="bl bw4 bw0-l pl4 pl0-l b--cru-tango f35";
d.innerHTML=a.innerHTML;
c.replaceChild(f,a);
f.appendChild(d)
}}());
(function(){if(!$(".blog-page a.comments").length){return
}var a=$(".cru-comments-wrapper > div");
var b=$(".comment-text");
$(".blog-page a.comments").click(function(c){c.preventDefault();
$(".cru-comments-wrapper").toggle();
b.parent().prev().toggle();
b.text(function(d,e){return e==="Hide comments"?"Show comments":"Hide comments"
});
a.addClass("fb-comments");
FB.XFBML.parse()
});
window.fbAsyncInit=function(){var c=null;
FB.api("/","get",{fields:"share{comment_count}",id:a.attr("data-href")},function(d){if(!d||d.error){return
}c=d.share.comment_count;
b.text(c?"Load comments ("+c+")":"Add comment")
})
}
})();
(function(){var a=$(".blog-page .article");
var c=$(".blog-page .read-time");
if(!a.length||!c.length){return
}var e=a.text(),b=e.replace(/[^\w ]/g,"").split(/\s+/).length;
var d=Math.ceil(b/130);
c.text(d+" Minute Read")
}());
(function(){if($(window).width()<=991){return
}var a=jQuery(".article-share");
if(!a.length){return
}setTimeout(function(){var c=30;
var b=a.offset().top-c;
var d=a.parents(".container");
d=d.offset().top+d.height()-a.height()-c;
$(window).on("scroll",function(g){var f=$(window).scrollTop();
if(f>b&&f<d){a.addClass("fixed");
a.css("top",c)
}else{a.removeClass("fixed")
}})
},1000)
})();
(function(a,c){var b=(function(d){return d
}(b||{}));
b.components=(function(d){return d
}(b.components||{}));
b.components.tile={DEFAULT_RENDITION_VALUE:"CruHalf432x243",CRU_RENDITION_VALUE:"CruWhole848x477",CRU_WIDTHS_VALUES_ARRAY:["col-md-12","col-md-8  col-sm-6"],CRU_1000_CHARACTERS_WIDTHS_ARRAY:["col-md-12","col-md-12  coverphoto","col-md-8  col-sm-6","col-md-6  col-sm-6"],PARSYS_CLASSES_ARRAY:[".tile-container-parsys",".post-body-parsys",".content-parsys"],afterRender:function(f){console.log("after render");
var d=f.element;
var g=d.firstElementChild;
var e=c(g).attr("class");
c(d).addClass(e);
c(g).removeClass(e);
this.PARSYS_CLASSES_ARRAY.forEach(function(h){var j=c(h);
if(j!=null&&j.length>0){if(c(h+" .divider").length==0){c("<div class='divider'></div>").insertAfter(c(h+" .parbase.section").last())
}}})
},updateRenditionField:function(e){var d=e.findParentByType("dialog").getField("./imageRenditionName");
var f=e.getValue();
d.setValue(this.DEFAULT_RENDITION_VALUE);
if(f=="col-md-12  coverphoto"){d.setValue("CruCoverPhoto880x374")
}else{if(this.CRU_WIDTHS_VALUES_ARRAY.indexOf(f)!=-1){d.setValue(this.CRU_RENDITION_VALUE)
}}},validator:function(h,f){var g=f.findParentByType("dialog").getField("./width").getValue();
var d=b.widgets.Util.richTextEditorCharacterCount(h);
var e=(this.CRU_1000_CHARACTERS_WIDTHS_ARRAY.indexOf(g)==-1)?600:1000;
if(b.widgets.Util.richTextEditorCharacterCount(h)>e){return CQ.I18n.getMessage("The character count limit is "+e)
}else{return true
}}};
c(a).ready(function(){c(".tile-read-more").click(function(h){h.preventDefault();
var f=c(this);
var g=f.next();
g.slideToggle(500);
d(f,CQ.I18n.getMessage("Read More"),CQ.I18n.getMessage("Show Less"));
return false
});
const d=function(g,f,e){return g.text(g.text()==e?f:e)
}
})
})(document,Granite.$);
var map;
$(document).ready(function(){if(!$(".summerMissions-map").length){return
}(function(){var styles=[{featureType:"water",elementType:"text",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry",stylers:[{visibility:"simplified"}]}];
var styledMap=new google.maps.StyledMapType(styles,{name:"Styled Map"});
var mapOptions={zoom:2,center:new google.maps.LatLng(35,-37),disableDefaultUI:false,streetViewControl:false,zoomControl:true,mapTypeControl:false,scrollwheel:false,panControl:false,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM},mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"],position:google.maps.ControlPosition.BOTTOM_LEFT}};
map=new google.maps.Map(document.getElementById("map_canvas"),mapOptions);
map.mapTypes.set("map_style",styledMap);
map.setMapTypeId("map_style");
var endPoint=document.getElementById("map_canvas").getAttribute("data-endpoint");
if(endPoint==null){endPoint="https://smapp.cru.org/projects/markers.js"
}$.ajax({url:endPoint,dataType:"jsonp",success:function(markers){eval(markers)
}})
})()
});
/*!
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */
;
(function(b){var d=false;
if(typeof define==="function"&&define.amd){define(b);
d=true
}if(typeof exports==="object"){module.exports=b();
d=true
}if(!d){var a=window.Cookies;
var c=window.Cookies=b();
c.noConflict=function(){window.Cookies=a;
return c
}
}}(function(){function b(){var f=0;
var c={};
for(;
f<arguments.length;
f++){var d=arguments[f];
for(var e in d){c[e]=d[e]
}}return c
}function a(d){function c(r,p,l){var t;
if(typeof document==="undefined"){return
}if(arguments.length>1){l=b({path:"/"},c.defaults,l);
if(typeof l.expires==="number"){var h=new Date();
h.setMilliseconds(h.getMilliseconds()+l.expires*86400000);
l.expires=h
}l.expires=l.expires?l.expires.toUTCString():"";
try{t=JSON.stringify(p);
if(/^[\{\[]/.test(t)){p=t
}}catch(n){}if(!d.write){p=encodeURIComponent(String(p)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)
}else{p=d.write(p,r)
}r=encodeURIComponent(String(r));
r=r.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent);
r=r.replace(/[\(\)]/g,escape);
var k="";
for(var o in l){if(!l[o]){continue
}k+="; "+o;
if(l[o]===true){continue
}k+="="+l[o]
}return(document.cookie=r+"="+p+k)
}if(!r){t={}
}var s=document.cookie?document.cookie.split("; "):[];
var q=/(%[0-9A-Z]{2})+/g;
var m=0;
for(;
m<s.length;
m++){var j=s[m].split("=");
var g=j.slice(1).join("=");
if(!this.json&&g.charAt(0)==='"'){g=g.slice(1,-1)
}try{var f=j[0].replace(q,decodeURIComponent);
g=d.read?d.read(g,f):d(g,f)||g.replace(q,decodeURIComponent);
if(this.json){try{g=JSON.parse(g)
}catch(n){}}if(r===f){t=g;
break
}if(!r){t[f]=g
}}catch(n){}}return t
}c.set=c;
c.get=function(e){return c.call(c,e)
};
c.getJSON=function(){return c.apply({json:true},[].slice.call(arguments))
};
c.defaults={};
c.remove=function(f,e){c(f,"",b(e,{expires:-1}))
};
c.withConverter=a;
return c
}return a(function(){})
}));
(function(c){var d=(function(){function f(){this.host="https://api.sensation.io";
this.iframeAuthentication={initialized:false}
}f.prototype.setHost=function(g){this.host=g
};
f.prototype.authenticateApp=function(h,g,n,l,m){if(this.iframeAuthentication.frame){try{document.body.removeChild(this.iframeAuthentication.frame);
this.iframeAuthentication.frame=undefined
}catch(k){console.log("[SIO]: WARN: Could not remove SIO auth components",k)
}}if(this.iframeAuthentication.authListener){try{window.removeEventListener("message",this.iframeAuthentication.authListener);
this.iframeAuthentication.authListener=undefined
}catch(k){console.log("[SIO]: WARN: Could not remove SIO auth listener",k)
}}this.iframeAuthentication.uri=n;
var j="";
l.forEach(function(o){if(j!==""){j+="%20"
}j+=o
});
this.createAuthorizationFrame(this.host+"/v2/auth?client_id="+h+"&redirect_uri="+n+"&tenant_id="+g+"&scope="+j);
window.addEventListener("message",function(q){var r=q.data;
if(r&&r.length>0){var o=r.indexOf("token");
if(o>=0){var p=r.substr(o+6,r.length-o);
m(undefined,p)
}}},false)
};
f.prototype.createAuthorizationFrame=function(h){var j=this;
this.iframeAuthentication.frame=document.createElement("iframe");
var g="";
this.iframeAuthentication.frame.setAttribute("src",h);
this.iframeAuthentication.frame.setAttribute("style","display:none;");
document.body.appendChild(this.iframeAuthentication.frame);
this.iframeAuthentication.frame.onload=function(){j.iframeAuthentication.initialized=true
}
};
f.prototype.getStats=function(h,g,j){$.ajax({url:this.host+"/v2/stats/questions/"+g,type:"GET",beforeSend:function(k){k.setRequestHeader("Authorization","Bearer "+h)
}}).done(function(k){if(j){j(undefined,k)
}else{console.error("[BACKENDCONNECTOR]: Callback was not provided")
}}).fail(function(k){console.log("[BACKENDCONNECTOR]: There was an error loading the question stats",k);
j(k)
})
};
f.prototype.getTagStats=function(h,g,j){$.ajax({url:this.host+"/v2/stats/questions/"+g+"/tags",type:"GET",beforeSend:function(k){k.setRequestHeader("Authorization","Bearer "+h)
}}).done(function(k){if(j){j(undefined,k)
}else{console.error("[BACKENDCONNECTOR]: Callback was not provided")
}}).fail(function(k){console.log("[BACKENDCONNECTOR]: There was an error loading the question stats",k);
j(k)
})
};
f.prototype.loadQuestion=function(h,g,j){$.ajax({url:this.host+"/v2/questions/"+g,type:"GET",beforeSend:function(k){k.setRequestHeader("Authorization","Bearer "+h)
}}).done(function(k){if(j){j(undefined,k)
}else{console.error("[BACKENDCONNECTOR]: Callback was not provided")
}}).fail(function(k){console.log("[BACKENDCONNECTOR]: There was an error loading the poll question",k);
j(k)
})
};
f.prototype.addRecord=function(j,g,m){var l={question_id:g.questionId,x:g.x,y:g.y,tags:g.tags,key:g.key};
if(!l.tags){l.tags=[]
}var h=Cookies.getJSON("sioUserSegment");
var k=Cookies.get("sioPageContext");
if(h){if(h.age){if(l.tags.indexOf(h.age)==-1){l.tags.push(h.age)
}}if(h.gender){if(l.tags.indexOf(h.gender)==-1){l.tags.push(h.gender)
}}}if(k){k="page::"+k;
if(l.tags.indexOf(k)==-1){l.tags.push(k)
}}$.ajax({url:this.host+"/v2/records/"+g.questionId,type:"POST",headers:{"Content-Type":"application/json; charset=utf8"},data:JSON.stringify(l),beforeSend:function(n){n.setRequestHeader("Authorization","Bearer "+j)
}}).done(function(n){if(m){m(undefined,n)
}else{console.log("[BACKENDCONNECTOR]: Callback was not provided")
}}).fail(function(n){m(n);
console.log("[BACKENDCONNECTOR]: There was an error when posting a multi jam",n)
})
};
return f
}());
var b=(function(){function f(){this.configuration={categories:{},emotionMapDimension:{x:10,y:10},emotionMapSquareSize:25,backgroundColor:{r:255,g:255,b:255,a:0.9},gridMode:"dashed",gridColor:{r:200,g:200,b:200,a:1},gridCrosshairColor:{r:160,g:160,b:160,a:1},gridCrosshairMode:"line",readonly:false,submitOnClick:false};
this.defaultCategoryId="defaultCategory";
this.defaultCategoryName="Default Category";
this.emotionMapElement=undefined;
this.data={};
this.onConfigurationChangeCallbacks=[];
this.onHoverCallbacks=[];
this.onClickCallbacks=[];
this.onSubmitCallbacks=[]
}f.prototype.extendConfiguration=function(g){this.configuration=$.extend({},this.configuration,g);
if(g.labels){this.renderLabels()
}if(g.emotionMapSquareSize||g.backgroundColor||g.gridColor||g.gridMode||g.gridColor||g.gridCrosshairMode||g.gridCrosshairColor){this.initializeMap(this.configuration.targetElementId)
}if(g.targetElementId){this.setEmotionMapElementById(g.targetElementId)
}this.triggerConfigurationChangeCallbacks()
};
f.prototype.getConfiguration=function(){return this.configuration
};
f.prototype.getCategory=function(g){return this.configuration.categories[g]
};
f.prototype.onConfigurationChange=function(h,g){if(g===void 0){g=true
}this.onConfigurationChangeCallbacks.push(h);
if(g){h(this.configuration)
}};
f.prototype.triggerConfigurationChangeCallbacks=function(){var g=this;
$.each(this.onConfigurationChangeCallbacks,function(h,j){j(g.configuration)
})
};
f.prototype.setText=function(j,g,k){var h="emotionmap-text-"+g;
this.emotionMapElement.find("."+h).fadeOut(function(){this.remove()
});
this.emotionMapElement.append($('<div class="emotionmap-text '+h+" "+k+'" style="width:'+(this.configuration.emotionMapDimension.x*this.configuration.emotionMapSquareSize)/2+"px;height:"+((this.configuration.emotionMapDimension.y*this.configuration.emotionMapSquareSize)/2+1)+'px">'+j+"</div>").hide().fadeIn())
};
f.prototype.setAfterRegisterMessage=function(g,j){var h="emotionmap-text-center";
this.emotionMapElement.find("."+h).fadeOut(function(){this.remove()
});
this.emotionMapElement.append($('<div class="emotionmap-text '+h+" "+j+'" style="width:'+(this.configuration.emotionMapDimension.x*this.configuration.emotionMapSquareSize)+"px;height:"+((this.configuration.emotionMapDimension.y*this.configuration.emotionMapSquareSize)+1)+'px"></div>').append(g).hide().fadeIn())
};
f.prototype.clearTexts=function(){this.emotionMapElement.find(".emotionmap-text").fadeOut(function(){this.remove()
})
};
f.prototype.setLabels=function(k,g,j,h){this.configuration.labels={top:k,bottom:g,left:j,right:h};
this.renderLabels();
this.triggerConfigurationChangeCallbacks()
};
f.prototype.addPoints=function(g){var h=this;
$.each(g,function(k,j){h.addPoint(j)
})
};
f.prototype.addCategory=function(g){this.configuration.categories[g.id]=g;
this.triggerConfigurationChangeCallbacks()
};
f.prototype.addPoint=function(j,h,l,k){var g;
if(typeof j==="string"){g={x:h,y:l,value:k,categoryId:j}
}else{g=j
}if(g.categoryId===undefined){g.categoryId=this.getDefaultCategory().id
}if(this.data[g.categoryId]===undefined){this.data[g.categoryId]=[]
}this.data[g.categoryId].push(g)
};
f.prototype.convertYXArrayToPoints=function(j){var h=[];
for(var k=0;
k<j.length;
k++){for(var g=0;
g<j[k].length;
g++){h.push({x:g,y:k,value:j[k][g]})
}}return h
};
f.prototype.convertXYArrayToPoints=function(h){var j=[];
for(var k=0;
k<h.length;
k++){for(var g=0;
g<h[k].length;
g++){j.push({x:g,y:k,value:h[g][k]})
}}return j
};
f.prototype.showLoading=function(h,g){if(g===void 0){g=true
}var j=$("#"+this.configuration.targetElementId);
if(h){j=$("#"+h)
}j.toggleClass("emotionmap-loading",g)
};
f.prototype.showRandomData=function(){this.clearData(this.getDefaultCategory().id);
var h=[];
for(var g=0;
g<this.configuration.emotionMapDimension.x;
g++){for(var j=0;
j<this.configuration.emotionMapDimension.y;
j++){if(Math.random()>0.5){h.push({x:g,y:j,value:Math.random(),categoryId:this.getDefaultCategory().id})
}}}this.addPoints(h);
this.renderPoints();
this.triggerConfigurationChangeCallbacks()
};
f.prototype.clearHeatMap=function(){this.clearHeatMapByTargetElement(this.emotionMapElement[0])
};
f.prototype.clearHeatMapByTargetElement=function(g){$(g).find("td").css("backgroundColor",this.getBackgroundColorAsRGBAString());
this.renderPoints()
};
f.prototype.clearHover=function(){this.clearHeatMap()
};
f.prototype.onHover=function(g){this.onHoverCallbacks.push(g)
};
f.prototype.triggerOnHover=function(h,m,l,k){if(l===undefined||l===null){l=this.getDefaultCategory().id
}$.each(this.onHoverCallbacks,function(n,o){o(h,m,l,k)
});
this.clearHover();
var g=this.getFirstColor(l);
var j=this.getSecondColor(l);
this.paintColor(h,m,g,true);
this.paintColor(h+1,m,j);
this.paintColor(h-1,m,j);
this.paintColor(h,m-1,j);
this.paintColor(h,m+1,j);
this.paintColor(h+1,m+1,j);
this.paintColor(h+1,m-1,j);
this.paintColor(h-1,m+1,j);
this.paintColor(h-1,m-1,j)
};
f.prototype.onClick=function(g){this.onClickCallbacks.push(g)
};
f.prototype.triggerOnClick=function(h,m,l,k){this.clearHover();
if(l===undefined||l===null){l=this.getDefaultCategory().id
}if(!this.data[l]){this.data[l]=[]
}var j=this.getCategory(l);
var g=this.getFirstColor(l);
this.emotionMapElement.find('*[data-x="'+h+'"][data-y="'+m+'"]').css("backgroundColor",g);
if(j.maxVotes!==undefined&&this.data[l].length>=j.maxVotes){this.data[l].shift()
}this.data[l].push({categoryId:l,x:h,y:m,value:1});
if(j.changeableVote===false&&(j.maxVotes===undefined||this.data[l].length>=j.maxVotes)){this.configuration.readonly=true
}this.renderPoints();
this.triggerConfigurationChangeCallbacks();
$.each(this.onClickCallbacks,function(n,o){o(h,m,l,k)
});
if(this.configuration.submitOnClick){this.triggerOnSubmit(h,m,l)
}};
f.prototype.onSubmit=function(g){this.onSubmitCallbacks.push(g)
};
f.prototype.triggerOnSubmit=function(g,j,h){if(h===undefined||h===null){h=this.getDefaultCategory().id
}$.each(this.onSubmitCallbacks,function(k,l){l(g,j,h)
});
if(this.configuration.afterSubmit){switch(this.configuration.afterSubmit.type){case"message":this.setText(this.configuration.afterSubmit.data.text,this.configuration.afterSubmit.data.quarter);
break;
case"heatmap":console.error("which heatmap shall I show...");
break
}}};
f.prototype.initializeMap=function(k){var o=this;
this.onConfigurationChangeCallbacks=[];
this.onHoverCallbacks=[];
this.onClickCallbacks=[];
this.onSubmitCallbacks=[];
this.clearAllData();
if(k){this.configuration.targetElementId=k
}var m=$("#"+this.configuration.targetElementId);
var h='<div class="emotionmap-container" id="'+this.configuration.targetElementId+'" style="width:'+this.configuration.emotionMapSquareSize*this.configuration.emotionMapDimension.x+'px"><table class="emotionmap-table">';
for(var n=0;
n<this.configuration.emotionMapDimension.y;
n++){h+="<tr>";
for(var g=0;
g<this.configuration.emotionMapDimension.x;
g++){var j="width:"+this.configuration.emotionMapSquareSize+"px;height:"+this.configuration.emotionMapSquareSize+"px;";
j+="border:1px "+this.getBorderStyle(this.configuration.gridMode)+" "+this.getRGBAColorString(this.configuration.gridColor)+";";
if(g===((this.configuration.emotionMapDimension.x-2)/2)){j+="border-right-color:"+this.getRGBAColorString(this.configuration.gridCrosshairColor)+";border-right-style:"+this.getBorderStyle(this.configuration.gridCrosshairMode)+";"
}if(n===((this.configuration.emotionMapDimension.y-2)/2)){j+="border-bottom-color: "+this.getRGBAColorString(this.configuration.gridCrosshairColor)+";border-bottom-style:"+this.getBorderStyle(this.configuration.gridCrosshairMode)+";"
}h+='<td class="emotionmap-point" data-x="'+g+'" data-y="'+n+'" style="'+j+'"></td>'
}h+="</td>"
}h+="</table>";
h+='<div class="emotionmap-label emotionmap-label-top"></div>';
h+='<div class="emotionmap-label emotionmap-label-bottom"></div>';
h+='<div class="emotionmap-label emotionmap-label-left"></div>';
h+='<div class="emotionmap-label emotionmap-label-right"></div>';
h+="</div>";
var l=$(h);
l.on("click",function(p){if(!o.configuration.readonly){p.preventDefault();
p.stopImmediatePropagation();
o.triggerOnClick(parseInt(p.target.dataset["x"]),parseInt(p.target.dataset["y"]),null,p)
}});
l.on("mouseover",function(p){if(!o.configuration.readonly){p.preventDefault();
p.stopImmediatePropagation();
o.triggerOnHover(parseInt(p.target.dataset["x"]),parseInt(p.target.dataset["y"]),null,p)
}});
l.on("touchend",function(q){if(!o.configuration.readonly){q.preventDefault();
q.stopImmediatePropagation();
var r=q.originalEvent.changedTouches[0];
var p=document.elementFromPoint(r.clientX,r.clientY);
o.triggerOnClick(parseInt(p.dataset["x"]),parseInt(p.dataset["y"]),null,q)
}});
l.on("touchmove",function(q){if(!o.configuration.readonly){q.preventDefault();
q.stopImmediatePropagation();
var r=q.originalEvent.changedTouches[0];
var p=document.elementFromPoint(r.clientX,r.clientY);
o.triggerOnHover(parseInt(p.dataset["x"]),parseInt(p.dataset["y"]),null,q)
}});
this.emotionMapElement=l;
m.fadeOut(function(){m.replaceWith(l);
o.renderLabels();
l.hide().fadeIn(function(){o.renderPoints()
})
})
};
f.prototype.getBorderStyle=function(g){switch(g){case"dashed":return"dashed";
case"line":return"solid";
case"dotted":default:return"dotted"
}};
f.prototype.renderLabels=function(){if(this.configuration&&this.configuration.labels&&this.emotionMapElement){this.emotionMapElement.find(".emotionmap-label.emotionmap-label-top").text(this.configuration.labels.top);
this.emotionMapElement.find(".emotionmap-label.emotionmap-label-bottom").text(this.configuration.labels.bottom);
this.emotionMapElement.find(".emotionmap-label.emotionmap-label-left").text(this.configuration.labels.left);
this.emotionMapElement.find(".emotionmap-label.emotionmap-label-right").text(this.configuration.labels.right)
}};
f.prototype.convertHexToRGB=function(j){j=j.replace("#","");
if(j.length!==6&&j.length!==8){throw new Error("Please provide hex colors in 6-digit format!")
}var l=parseInt(j.substring(0,2),16);
var k=parseInt(j.substring(2,4),16);
var h=parseInt(j.substring(4,6),16);
return{r:l,g:k,b:h}
};
f.prototype.convertHexToRGBA=function(j){if(j===""){return
}var h=this.convertHexToRGB(j);
j=j.replace("#","");
var g;
j.length===8?g=parseInt(j.substring(6,8),16)/255:g=1;
return $.extend(h,{a:g})
};
f.prototype.getColor=function(h,j){if(j===void 0){j=1
}var g=this.configuration.categories[h];
if(!g){throw new Error("Could not find category '"+h+"'!")
}return this.getRGBAColorString($.extend(g.foregroundColor,{a:j}))
};
f.prototype.getRGBAColorString=function(g){return"rgba("+g.r+", "+g.g+", "+g.b+", "+g.a+")"
};
f.prototype.getBackgroundColorAsRGBAString=function(){return"rgba("+this.configuration.backgroundColor.r+", "+this.configuration.backgroundColor.g+", "+this.configuration.backgroundColor.b+", "+this.configuration.backgroundColor.a+")"
};
f.prototype.getFirstColor=function(g){return this.getColor(g,1)
};
f.prototype.getSecondColor=function(g){return this.getColor(g,0.2)
};
f.prototype.renderPoints=function(){var g=this;
this.emotionMapElement.find("td").css("backgroundColor",this.getBackgroundColorAsRGBAString());
$.each(this.data,function(h,k){for(var j=0;
j<k.length;
j++){g.emotionMapElement.find('td[data-x="'+k[j].x+'"][data-y="'+k[j].y+'"]').css("backgroundColor",g.getColor(k[j].categoryId,k[j].value))
}})
};
f.prototype.clearData=function(g){this.data[g]=[]
};
f.prototype.clearAllData=function(){this.data={}
};
f.prototype.getDataForCategoryId=function(g){return this.data[g]
};
f.prototype.getData=function(){return this.data
};
f.prototype.createDefaultCategory=function(){var g={id:this.defaultCategoryId,foregroundColor:{r:228,g:40,b:57},label:this.defaultCategoryName,maxVotes:1,changeableVote:true};
this.configuration.categories[this.defaultCategoryId]=g;
this.data[g.id]=[];
this.triggerConfigurationChangeCallbacks();
return g
};
f.prototype.paintColor=function(g,l,h,k){if(k===void 0){k=false
}var j=this.emotionMapElement.find('*[data-x="'+g+'"][data-y="'+l+'"]');
if(k||this.isFieldEmpty(g,l)){j.css("backgroundColor",h)
}};
f.prototype.isFieldEmpty=function(h,k){for(var j in this.data){for(var g in this.data[j]){if(this.data[j][g].x===h&&this.data[j][g].y===k){return false
}}}return true
};
f.prototype.getEmotionMapElement=function(){return this.emotionMapElement
};
f.prototype.setEmotionMapElementById=function(g){this.emotionMapElement=$("#"+g)
};
f.prototype.getDefaultCategory=function(){if(this.configuration.categories[this.defaultCategoryId]===undefined){return this.createDefaultCategory()
}return this.configuration.categories[this.defaultCategoryId]
};
f.prototype.authorize=function(h,g,m,o){var j=window.SIOPlugin;
j={initialized:false};
var n=false;
if(j.frame){try{document.body.removeChild(j.frame);
j.frame=undefined
}catch(l){console.log("[SIO]: WARN: Could not remove SIO auth components",l)
}}if(j.authListener){try{window.removeEventListener("message",j.authListener);
j.authListener=undefined
}catch(l){console.log("[SIO]: WARN: Could not remove SIO auth listener",l)
}}j.uri=m;
var k="https://rest.sensation.io/token?client_id="+h+"&redirect_uri="+m+"&tenant="+g;
j.createFrame=function(){j.frame=document.createElement("iframe");
var p="";
j.frame.setAttribute("src",k);
j.frame.setAttribute("style","display:none;");
document.body.appendChild(j.frame);
j.frame.onload=function(){j.initialized=true
}
};
j.createFrame();
window.addEventListener("message",function(r){var s=r.data;
if(s&&s.length>0){var p=s.indexOf("sio_token");
if(p>=0){var q=s.substr(p+10,s.length-p);
o(undefined,q)
}}},false)
};
return f
}());
var e=(function(){function f(){}f.getParameterByName=function(h,g){if(!g){g=window.location.href
}h=h.replace(/[\[\]]/g,"\\$&");
var k=new RegExp("[?&]"+h+"(=([^&#]*)|&|#|$)");
var j=k.exec(g);
if(!j){return null
}if(!j[2]){return""
}return decodeURIComponent(j[2].replace(/\+/g," "))
};
return f
}());
var a=(function(){function f(j,h,g){this.currentStep=0;
this.resultSubmitted=false;
this.controls={};
this.globalTags=[];
this.onStoryNodeLeaveCallbacks=[];
this.storyContainer=j;
if(this.storyContainer.length===0){throw new Error("StoryContainer could not be found!")
}this.htmlRenderer=h;
this.backendConnector=g
}f.prototype.getShortDateString=function(l,n,k,h){var g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
var m="";
if(l!=null){if(n!=null){if(h!=null){m=g[n]+" "+h
}else{m=g[n]
}}else{if(k!=null){var j=new Date(l,0,(1+(k-1)*7));
m=g[j.getMonth()]+" "+j.getDate()
}else{m=""+l
}}}else{console.error('Parameter "year" must be specified to generate date string')
}return m
};
f.prototype.aggregateSeries=function(j){var o=[];
var l=0;
var q=0;
var p=0;
var g=0;
var m=0;
var h=0;
var k;
for(var n=0;
n<j.length;
n++){l+=j[n].xsum;
q+=j[n].ysum;
p+=j[n].jam_count;
g=100*(l/(1*p))/9;
m=100*(9-q/(1*p))/9;
h=(g+m)/2;
if(j[n].year!=null){if(j[n].month!=null){if(j[n].day!=null){k=new Date(j[n].year,j[n].month,j[n].day)
}else{k=new Date(j[n].year,j[n].month)
}}else{if(j[n].week!=null){k=new Date(j[n].year,0,(1+(j[n].week-1)*7))
}else{console.log("[DEBUG]: Could not resolve date from entry",j[n])
}}}o.push({x:k,y:h})
}return o
};
f.prototype.loadStoryFromURL=function(g,j){var h=this;
this.tokenHandler(function(k){$.ajax({type:"GET",url:g,beforeSend:function(l){l.setRequestHeader("Authorization","Bearer "+k)
}}).done(function(m){if(m&&m.schema){h.story={tenantId:m.tenant_id,name:m.name,nodes:[]};
if(m.schema.tile_color){try{var n=h.htmlRenderer.convertHexToRGB(m.schema.tile_color);
if(n&&n.r){h.htmlRenderer.getDefaultCategory().foregroundColor=n
}}catch(l){console.error("Failed to load story color",l)
}}if(m.schema.client_logo){$(".client-logo").attr("src",m.schema.client_logo)
}if(m.schema.tags_prefix){h.setGlobalTagPrefix(m.schema.tags_prefix)
}if(m.schema.key){h.setGlobalKey(m.schema.key)
}if(m.schema.views&&m.schema.intro_captions){$.each(m.schema.views,function(o,q){if(q.id==="intro"){var p={type:"view",animated:q.animated,texts:m.schema.intro_captions,backgroundURL:q.background_image,cssClasses:m.schema.intro_classes,controls:{next:{text:"Start"}}};
h.story.nodes.push(p)
}})
}$.each(m.schema.story,function(r,w){switch(w.type){case"list":var x={type:"tags",multiSelect:false,questionId:w.question_id,subTitle:w.tags_title,tagsPrefix:w.tags_prefix,tags:$.map(w.list_items,function(y){return y.tag
}),maxSelect:1,initiallyDisabled:true,asGlobalTags:true,backgroundURL:w.background_image};
h.story.nodes.push(x);
break;
case"tags":var s=[];
var q=false;
if(w.token_tags&&w.token_tags.length>0){q=true;
s=w.token_tags
}else{s=w.sentiment_tags
}var p={type:"tags",multiSelect:true,tokenized:q,questionId:w.question_id,title:w.tags_subtitle,tagsPrefix:w.tags_prefix,tags:$.map(s,function(y){return y.tag
}),rawTags:$.map(s,function(y){return y.tag
}),maxSelect:w.max_select,initiallyDisabled:true,backgroundURL:w.background_image};
if(w.max_select){p.subTitle="Please choose no more than "+w.max_select+"!"
}h.story.nodes.push(p);
break;
case"text":var o={type:"text",questionId:w.question_id,title:w.title,tagsPrefix:w.tags_prefix,initiallyDisabled:false,backgroundURL:w.background_image};
h.story.nodes.push(o);
break;
case"analytics":var u={type:"analytics",questionId:w.question_id,title:w.title,backgroundURL:w.background_image,disableMap:w.disable_map,disableTags:w.disable_tags,disableTimeline:w.disable_timeline,disableHeartbeat:w.disable_heartbeat,disableAxesScores:w.disable_axes_scores,tagPrefix:w.tag_prefix,maxTags:w.max_tags,sendResultsOnEnter:w.submit_result};
h.story.nodes.push(u);
break;
case"map":var t={type:"map",questionId:w.question_id,title:w.title,result:{questionId:w.question_id,key:w.key},backgroundURL:w.background_image};
h.story.nodes.push(t);
break;
case"exit":var v={type:"view",animated:false,sendResultsOnEnter:true,controls:{next:{hidden:true},previous:{hidden:true}},texts:m.schema.exit_captions,backgroundURL:w.background_image,cssClasses:m.schema.exit_classes};
h.story.nodes.push(v);
break
}});
if(typeof j==="function"){j()
}}else{console.error("Could not load story schema. Please verify that the schema ID is correct.",m)
}})
})
};
f.prototype.start=function(j){if(j===void 0){j=0
}this.reset();
this.currentStep=j;
var h=Cookies.getJSON("sioUserSegment");
var g=this.story.nodes[this.currentStep].tagsPrefix;
if(h&&(g=="context"||g=="unit")){if(h.age&&g=="context"&&this.hasNextStep()){return this.renderNextStep()
}else{if(h.gender&&g=="unit"&&this.hasNextStep()){return this.renderNextStep()
}}}if(this.story.nodes[this.currentStep]){this.renderStep(this.currentStep)
}else{console.error("No story step '"+this.currentStep+"' available!")
}};
f.prototype.reset=function(){this.currentStep=0;
this.globalTags=[];
if(this.story){for(var g in this.story.nodes){this.story.nodes[g].data={};
if(this.story.nodes[g].type==="map"){this.story.nodes[g].result={}
}}}};
f.prototype.updateStepsCounterContent=function(){if(this.controls&&this.controls.stepsCounter&&this.controls.stepsCounter.length>0){var g=this.currentStep+1;
var h=this.story.nodes.length;
if(!(this.stepsToSkipInCounter instanceof Array)){this.controls.stepsCounter.get(0).innerText=g+" / "+h
}else{if(this.stepsToSkipInCounter.indexOf(g)!==-1){this.controls.stepsCounter.get(0).innerText=""
}else{h-=this.stepsToSkipInCounter.length;
$.each(this.stepsToSkipInCounter,function(j,k){if(k<g){g--
}});
this.controls.stepsCounter.get(0).innerText=g+" / "+h
}}}};
f.prototype.renderStep=function(g){this.updateStepsCounterContent();
if(this.controls.next){this.controls.next.toggleClass("disabled",!this.hasNextStep())
}if(this.controls.previous){this.controls.previous.toggleClass("disabled",!this.hasPreviousStep())
}this.renderStoryNode(this.story.nodes[g])
};
f.prototype.renderStoryNode=function(g){var h=this;
$(".client-logo").hide();
if(g.type=="view"){$("#next").attr("style","display:inline-block !important")
}else{$("#next").attr("style","display:none !important")
}this.storyContainer.fadeOut(function(){h.storyContainer.empty();
var B=h.controls;
var N=h.globalTags;
$(".emotionmap-title").empty();
$(".emotionmap-subtitle").empty();
if(g.title){if(!$(".emotionmap-title")){h.storyContainer.append('<div class="emotionmap-title">'+g.title+"</div>")
}else{$(".emotionmap-title").append(g.title)
}}if(g.subTitle&&g.type!="text"){h.storyContainer.append('<div class="emotionmap-subtitle">'+g.subTitle+"</div>")
}if(h.controls){if(h.controls.next){if(g.controls&&g.controls.next&&g.controls.next.text){h.controls.next.text(g.controls.next.text)
}else{h.controls.next.text("Next")
}}if(h.controls.next){if(g.controls&&g.controls.next&&g.controls.next.hidden===true){h.controls.next.fadeOut()
}else{h.controls.next.fadeIn()
}}if(h.controls.previous){if(g.controls&&g.controls.previous&&g.controls.previous.hidden===true){h.controls.previous.fadeOut()
}else{h.controls.previous.fadeIn()
}}}if(g.sendResultsOnEnter){if(!h.resultSubmitted){h.sendResults()
}else{console.log("Results have already been submitted.")
}}switch(g.type){case"tags":var k=g;
var v=void 0;
var o;
if(k.initiallyDisabled&&B&&B.next){B.next.addClass("disabled")
}if(k.questionId){for(var G=0;
G<h.story.nodes.length;
G++){if(h.story.nodes[G].type==="map"&&h.story.nodes[G].questionId===k.questionId){var K=h.story.nodes[G];
v=K.result;
if(!(K.result.tags instanceof Array)){K.result.tags=[]
}o=K.result.tags;
break
}}}else{o=[]
}var j=[];
for(var q in k.tags){var H="btn btn-default btn-sm btn-tags";
var O=null;
var L=null;
if(k.rawTags&&k.rawTags.length>q){O=k.rawTags[q];
L=k.rawTags[q]
}else{O=k.tags[q];
L=k.tags[q]
}if(O.indexOf("header|")<0){if(k.tokenized&&v){var l=void 0;
var M=void 0;
var m=void 0;
var n=void 0;
var A=void 0;
var s=O.indexOf("[");
var J=O.indexOf("]");
if(s>=0&&J>0){n=O.substr(s,J-s+1);
A=n.split("|");
if(A.length==3){l=A[0].replace("[","").replace("]","");
M=A[1].replace("[","").replace("]","");
m=A[2].replace("[","").replace("]","");
if(l=="y"){if(v.y<5){O=O.replace(n,m)
}else{O=O.replace(n,M)
}}else{if(v.x<5){O=O.replace(n,M)
}else{O=O.replace(n,m)
}}k.tags[q]=O;
L=O
}else{}}}if(k.tagsPrefix){O=k.tagsPrefix+"::"+O
}if(o.indexOf(O)!==-1){H+=" btn-primary"
}j[q]=$('<button class="'+H+'" data-index="'+q+'">'+L+"</button>");
j[q].on("click",function(){var S=$(this).attr("data-index");
var T=k.tags[S];
if(k.tagsPrefix){T=k.tagsPrefix+"::"+T
}var Q=o.indexOf(T);
if(k.asGlobalTags){var R=Cookies.getJSON("sioUserSegment");
if(!R){R={age:null,gender:null};
Cookies.set("sioUserSegment",R)
}if(k.tagsPrefix=="context"){R.age=T
}else{if(k.tagsPrefix=="unit"){R.gender=T
}}Cookies.set("sioUserSegment",R)
}if(Q===-1){if(k.maxSelect){if(k.maxSelect===1){$.each(j,function(U,V){if(V.hasClass("btn-primary")){var W=o.indexOf(k.tagsPrefix+"::"+V[0].innerText);
o.splice(W,1)
}V.toggleClass("btn-primary",false)
})
}else{if(o.length>=k.maxSelect){console.info("already selected maximum of tags!");
return
}}}j[S].toggleClass("btn-primary",true);
o.push(T)
}else{j[S].toggleClass("btn-primary",false);
o.splice(Q,1)
}if(k.initiallyDisabled&&B&&B.next){if(o&&o.length>0){B.next.removeClass("disabled")
}else{B.next.addClass("disabled")
}}var P=null;
if(k.asGlobalTags){if(N){P=N.indexOf(T);
if(P===-1){if(k.maxSelect&&k.maxSelect===1){$.each(k.tags,function(U,W){var V=N.indexOf(k.tagsPrefix+"::"+W);
if(V>=0){N.splice(V,1)
}})
}N.push(T)
}else{N.splice(P,1)
}}}})
}else{}}if(typeof k.onLeave==="function"){h.onStoryNodeLeaveCallbacks.push(function(){k.onLeave(o)
})
}var u="tags-wrapper";
if(k.tags.length<=8){u+=" tags-list"
}var D=$('<div class="'+u+'"></div>');
D.append(j);
h.storyContainer.append(D);
if(typeof g.onStart==="function"){g.onStart(h.storyContainer,function(){h.storyContainer.fadeIn()
})
}else{h.storyContainer.fadeIn()
}break;
case"analytics":console.debug("[debug]: STORY_ANALYTICS_IGN");
break;
case"text":var w=g;
var E;
var I;
if(w.initiallyDisabled&&B&&B.next){B.next.addClass("disabled")
}if(w.questionId){for(var G=0;
G<h.story.nodes.length;
G++){if(h.story.nodes[G].type==="map"&&h.story.nodes[G].questionId===w.questionId){I=h.story.nodes[G];
break
}}}if(typeof w.onLeave==="function"){h.onStoryNodeLeaveCallbacks.push(function(){w.onLeave([E])
})
}var t="tags-wrapper from-group";
var F=$('<textarea rows="3" class="sio-text-input form-control" id="sio-text-input"></textarea>');
F.on("change",function(P){if(I){I.result.text=w.text=w.tagsPrefix+"::"+$(".sio-text-input").val()
}});
var z=$('<div class="'+t+'"></div>');
z.append(F);
h.storyContainer.append(z);
if(typeof g.onStart==="function"){g.onStart(h.storyContainer,function(){h.storyContainer.fadeIn()
})
}else{h.storyContainer.fadeIn()
}break;
case"map":var p=g;
if(h.controls.next){h.controls.next.addClass("disabled")
}var C=h.storyContainer.append('<div id="emotionmap-htmlrenderer-container"></div>');
h.htmlRenderer.initializeMap("emotionmap-htmlrenderer-container");
h.htmlRenderer.extendConfiguration({readonly:false});
if(p.result&&p.result.x&&p.result.y){h.htmlRenderer.addPoint({value:1,x:p.result.x,y:p.result.y});
if(h.controls.next){h.controls.next.removeClass("disabled")
}}h.htmlRenderer.onClick(function(Q,P){if(p.result===undefined){p.result={}
}p.result.x=Q;
p.result.y=P;
if(h.controls.next){h.controls.next.removeClass("disabled")
}});
if(typeof p.onResult==="function"){p.onResult(h.htmlRenderer.getData())
}if(typeof p.onLeave==="function"){h.onStoryNodeLeaveCallbacks.push(function(){p.onLeave(h.htmlRenderer.getData())
})
}if(p.questionId!==undefined){h.showLoading();
h.tokenHandler(function(P){h.backendConnector.loadQuestion(P,p.questionId,function(R,Q){if(R){throw R
}if(!g.title){if(!$(".emotionmap-title")){h.storyContainer.append('<div class="emotionmap-title">'+Q.phrase+"</div>")
}else{$(".emotionmap-title").append(Q.phrase)
}}h.htmlRenderer.setLabels(Q.north,Q.south,Q.west,Q.east);
h.hideLoading();
if(typeof g.onStart==="function"){g.onStart(h.storyContainer,function(){h.storyContainer.fadeIn()
})
}else{h.storyContainer.fadeIn()
}})
})
}else{if(p.question){if(!g.title){if(!$(".emotionmap-title")){h.storyContainer.append('<div class="emotionmap-title">'+p.question.phrase+"</div>")
}else{$(".emotionmap-title").append(p.question.phrase)
}}h.htmlRenderer.setLabels(p.question.north,p.question.south,p.question.west,p.question.east);
if(typeof g.onStart==="function"){g.onStart(h.storyContainer,function(){h.storyContainer.fadeIn()
})
}else{h.storyContainer.fadeIn()
}}else{throw new Error("A map node needs to define a questionId or a question object!")
}}break;
case"view":var r=g;
$(".client-logo").show();
h.storyContainer.fadeIn(function(){var Q=[];
var P=undefined;
$.each(r.texts,function(S,U){var T="emotionmap-view-text";
if(r.cssClasses&&r.cssClasses[S]){T+=" "+r.cssClasses[S]
}var V="";
if(T.indexOf("sio-ic-row-")!==-1){var W=new RegExp("sio-ic-row-([0-9]*) ","gi");
var R=W.exec(r.cssClasses[S]);
if(R[1]){if(P===undefined||P!==R[1]){V="<br>"
}P=R[1]
}}Q.push($(V+'<span class="'+T+'" style="opacity: 0">'+U+"</span>"))
});
h.storyContainer.append(Q);
$(Q).each(function(R){if(r.animated){$(this).animate({opacity:0},R*800,function(){}).animate({opacity:1},3200)
}else{$(this).css("opacity",1)
}})
});
break;
case"image":var y=g;
h.storyContainer.append('<img src="'+y.imageUrl+'">');
h.storyContainer.fadeIn();
break;
case"custom":var x=g;
if(x.initiallyDisabled&&B&&B.next){B.next.addClass("disabled")
}if(typeof x.onStart==="function"){x.onStart(h.storyContainer,function(){h.storyContainer.fadeIn()
})
}else{throw new Error("CustomNodes have to implement the onStart function!")
}if(typeof x.onLeave==="function"){h.onStoryNodeLeaveCallbacks.push(function(){x.onLeave()
})
}break;
default:throw new Error("Unknown node type : "+g.type)
}})
};
f.prototype.initializeEmptyStory=function(){this.story={nodes:[]}
};
f.prototype.addStoryNode=function(g){this.story.nodes.push(g)
};
f.prototype.renderNextStep=function(){$.each(this.onStoryNodeLeaveCallbacks,function(j,k){k()
});
this.onStoryNodeLeaveCallbacks=[];
if(this.hasNextStep()){this.currentStep++;
var h=Cookies.getJSON("sioUserSegment");
var g=this.story.nodes[this.currentStep].tagsPrefix;
if(h&&(g=="context"||g=="unit")){if(h.age&&g=="context"&&this.hasNextStep()){return this.renderNextStep()
}else{if(h.gender&&g=="unit"&&this.hasNextStep()){return this.renderNextStep()
}}}this.renderStep(this.currentStep)
}};
f.prototype.renderPreviousStep=function(){if(this.hasPreviousStep()){this.onStoryNodeLeaveCallbacks=[];
this.currentStep--;
this.renderStep(this.currentStep)
}};
f.prototype.hasNextStep=function(){return this.story&&this.currentStep<(this.story.nodes.length-1)
};
f.prototype.hasPreviousStep=function(){return this.currentStep>0
};
f.prototype.addControls=function(g){this.controls=g;
this.mapControls()
};
f.prototype.addControlsById=function(g){if(g.cancel){this.controls.cancel=$(g.cancel)
}if(g.next){this.controls.next=$(g.next)
}if(g.previous){this.controls.previous=$(g.previous)
}if(g.submit){this.controls.submit=$(g.submit)
}if(g.stepsCounter){this.controls.stepsCounter=$(g.stepsCounter)
}this.mapControls()
};
f.prototype.mapControls=function(){var g=this;
if(this.controls.next){this.controls.next.on("click",function(){if(!g.controls.next.hasClass("disabled")){g.renderNextStep()
}})
}if(this.controls.previous){this.controls.previous.on("click",function(){g.renderPreviousStep()
})
}if(this.controls.cancel){this.controls.cancel.on("click",function(){g.reset();
g.start(g.getStepURLParameter(0))
})
}if(this.controls.submit){this.controls.submit.on("click",function(){if(!g.controls.submit.hasClass("disabled")){g.sendResults(function(){g.reset();
g.start(g.getStepURLParameter(0))
})
}})
}};
f.prototype.getStepURLParameter=function(h){if(h===void 0){h=0
}var g=parseInt(e.getParameterByName("step"));
if(typeof g!=="number"||isNaN(g)){return h
}else{return g
}};
f.prototype.showLoading=function(){this.htmlRenderer.showLoading(this.storyContainer.attr("id"),true)
};
f.prototype.hideLoading=function(){this.htmlRenderer.showLoading(this.storyContainer.attr("id"),false)
};
f.prototype.addTokenHandler=function(g){this.tokenHandler=g
};
f.prototype.setGlobalTags=function(g){this.globalTags=g
};
f.prototype.getGlobalTags=function(){return this.globalTags
};
f.prototype.addGlobalTags=function(g){this.globalTags=this.globalTags.concat(g)
};
f.prototype.clearGlobalTags=function(){this.globalTags=[]
};
f.prototype.setGlobalKey=function(g){this.globalKey=g
};
f.prototype.setGlobalTagPrefix=function(g){this.globalTagPrefix=g
};
f.prototype.skipStepsInCounter=function(g){this.stepsToSkipInCounter=g
};
f.prototype.sendResults=function(g){var h=this;
this.tokenHandler(function(j){$.each(h.story.nodes,function(l,m){if(m.type==="map"){var n=m;
var k={key:n.result.key,questionId:n.questionId,x:n.result.x,y:n.result.y,tags:n.result.tags,text:n.result.text};
if(!k.key){k.key=h.globalKey
}if(!(k.tags instanceof Array)){k.tags=[]
}k.tags=k.tags.concat(h.globalTags);
if(k.text&&k.text.length>0){k.tags=k.tags.concat(k.text)
}if(h.globalTagPrefix!==undefined){$.each(k.tags,function(p,o){o=h.globalTagPrefix+"::"+o
})
}h.backendConnector.addRecord(j,k,function(p,o){if(p){console.log(p)
}h.resultSubmitted=true
})
}})
})
};
return f
}());
c.BackendConnector=d;
c.HTMLRenderer=b;
c.StoryBuilder=a;
c.Utils=e
}((this.sensationio=this.sensationio||{})));
$(document).ready(function(){var h=".sio-storyContainer";
var p="#sio-nextBtn";
var g="#sio-prevBtn";
var l="#sio-cancelBtn";
var j="#sio-submitBtn";
var q="#sio-stepsCounter";
var b={r:51,g:122,b:183};
var s="";
var a="";
var t="";
var n="",r;
if($(h).length){s=$(h).attr("sio-cid");
a=$(h).attr("sio-tid");
t=$(h).attr("sio-sid");
n=$(h).attr("sio-uri");
r=$(h).attr("sio-page-context");
if(r){Cookies.set("sioPageContext",r,{path:""})
}}else{return
}var e;
var m="sensation.io (c) 2017";
$(".welcomeTitle").html(m);
var d=new sensationio.BackendConnector();
d.setHost("https://api.sensation.io");
var c=new sensationio.HTMLRenderer();
var k=c.getDefaultCategory();
k.foregroundColor=b||{r:231,g:37,b:59};
c.extendConfiguration({categories:{defaultCategory:k},submitOnClick:false,emotionMapSquareSize:26});
var f=new sensationio.StoryBuilder($(h),c,d);
f.addControlsById({cancel:l,next:p,previous:g,stepsCounter:q,submit:j});
function o(v){if(e){v(e)
}else{var u=sensationio.Utils.getParameterByName("siotkn");
if(u&&u.length>0){e=u;
v(e)
}else{d.authenticateApp(s,a,n,["basic.read","basic.write"],function(x,w){if(x){console.error(x)
}else{e=w;
v(e)
}})
}}}f.addTokenHandler(o);
f.loadStoryFromURL("https://api.sensation.io/v2/me/configs/"+t,function(){var u=parseInt(sensationio.Utils.getParameterByName("step"));
if(typeof u==="number"&&!isNaN(u)){f.start(u)
}else{f.start()
}})
});
var Cru=(function(a){return a
}(Cru||{}));
Cru.components=(function(a){return a
}(Cru.components||{}));
Cru.components.searchresults={className:"div.primary-search__results",refresh:function(b){function a(e){var c=Cru.components.searchresults;
var d=$(c.className);
var f=$(e).children().unwrap();
d.html(f);
c.init()
}$.ajax({url:b,dataType:"html",success:a})
},init:function(){var a=$(this.className+" .pagination");
function b(j){if(this.href.indexOf("_jcr_content")===-1&&this.href.indexOf("jcr:content")===-1){var d=$(Cru.components.searchresults.className).data("asynchronous-path");
var f=$("<a>",{href:d})[0];
var h=f.href.split("/jcr:content")[0];
var g=this.href.split(h).pop();
Cru.components.searchresults.refresh(d+g)
}else{Cru.components.searchresults.refresh(this.href)
}}if(a){var c=a.find("a");
c.on("click",b)
}}};
$(Cru.components.searchresults.className).ready(function(){Cru.components.searchresults.init()
});
if($(".pagination__prev a").attr("href")){var prev_url=$(".pagination__prev a").attr("href").replace(/%2B/g,"%20");
$(".pagination__prev a").attr("href",prev_url)
}if($(".pagination__next a").attr("href")){var next_url=$(".pagination__next a").attr("href").replace(/%2B/g,"%20");
$(".pagination__next a").attr("href",next_url)
}if(digitalData.page.pageInfo.onsiteSearchTerm){digitalData.page.pageInfo.onsiteSearchResults=$(".globalSearch-resultsTitle").text().split(" ").shift().replace(",","")
}Cru.components.omnisearch={className:"omni-search-component",init:function(){this.$component=$(".omni-search-component");
this.$resultsContainer=$("#resultItemsContainer");
this.$filtersContainer=$("#filtersContainer");
this.$resultsInfo=$(".results-info");
this.$searchInput=this.$component.find(".filter-search input");
this.$errorCall=$(".error-call");
this.$noResults=$(".no-results");
this.$loader=$(".loading-indicator");
this.$filtersWrapper=$(".filters-wrapper");
this.$clearFilters=$(".filters-clear-all");
this.$paginator=$(".paginator");
this.reloadFilters=false;
this.searchFilterContainer=".search-filter-group-items-container";
this.searchFilterInput=".search-filter-group-item input";
this.showMore=".search-filter-group-item-showmore-label";
this.showLess=".search-filter-group-item-showless-label";
this.showMoreItems=".search-filter-group-item-showmore-items";
this.maxFilterItems=this.$component.data("max-filter-items");
this.filters=this.$component.data("filters");
this.selectedFilters=[];
this.defaultImage=this.$component.data("default-image");
this.currentPage=1;
this.pageSize=this.$component.data("page-size")||10;
this.totalPages=0;
Handlebars.registerHelper("isExternalLink",function(a){const c=location.hostname;
const b=location.protocol;
return !a.startsWith(b+"//"+c)
});
this.keywordSearchEvent();
this.loadFiltersFromUrl();
this.loadData()
},clearResults:function(){this.$resultsContainer.html("");
this.$resultsInfo.html("");
this.$paginator.html("");
this.$errorCall.addClass("hidden");
this.$noResults.addClass("hidden")
},clearPagination:function(){this.currentPage=1;
this.totalPages=0;
this.$paginator.html("")
},paginationEvents:function(){var a=this;
$(".previous-page").click(function(b){if(a.currentPage>1){a.currentPage--
}a.setUrlSelectors();
a.loadData()
});
$(".result-page").click(function(b){var c=$(this).text();
a.currentPage=parseInt(c);
a.setUrlSelectors();
a.loadData()
});
$(".next-page").click(function(b){if(a.currentPage<a.totalPages){a.currentPage++
}a.setUrlSelectors();
a.loadData()
})
},buildPaginator:function(e,d){this.totalPages=d;
var c=this.pageRange(e,d);
var g=c.start;
var a=c.end;
var f='<span><a href="#" class="previous-page"> < </a></span>';
for(var b=g;
b<=a;
b++){f+='<span><a href="#" class="result-page'+(b==e?" active":"")+'">'+b+"</a></span>"
}f+='<span><a href="#" class="next-page"> > </a></span>';
this.$paginator.html(f);
this.paginationEvents()
},pageRange:function(c,b){var d=c-4,a=c+4;
if(a>b){d-=(a-b);
a=b
}if(d<=0){a+=(d-1)*-1;
d=1
}a=a>b?b:a;
return{start:d,end:a}
},renderResults:function(c){var a=this;
var e=$("#resultItemsTemplate").html();
var d;
var b;
if(e){d=Handlebars.compile(e);
b=d({items:Array.isArray(c.hits.hit)?c.hits.hit:new Array(c.hits.hit),defaultImage:a.defaultImage});
a.$resultsContainer.html(b);
a.$resultsInfo.text(a.formatString(a.$resultsInfo.data("template"),c.hits.found));
a.buildPaginator(a.currentPage,Math.ceil(c.hits.found/a.pageSize))
}},updateFilterMargin:function(){const a=$(".filters-wrapper");
if($(".omni-search-right").css("margin-top")==="40px"){a.css("margin-top",0)
}else{a.css("margin-top","")
}},renderFilters:function(h){var a=$("#filtersTemplate").html();
var k;
var f;
var g=0;
if(a){k=Handlebars.compile(a);
var c=h.facets.tags;
let filtersConfig=JSON.parse(JSON.stringify(this.filters));
for(var e=0;
e<filtersConfig.length;
e++){var b=filtersConfig[e];
if(h.hits.found>0){for(var d=0;
d<b.filters.length;
d++){this.updateFilterCountValues(c.buckets,b.filters[d])
}b.filters=b.filters.filter(function(l,j){return l.count
})
}if(b.filters.length>this.maxFilterItems){b.initialValues=b.filters.slice(0,this.maxFilterItems);
b.showMoreValues=b.filters.slice(this.maxFilterItems)
}else{if(Array.isArray(b.filters)){b.initialValues=b.filters
}else{b.initialValues=new Array(b.filters)
}}}filtersConfig=filtersConfig.filter(function(l,j){return l.filters.length>0
});
f=k({items:filtersConfig,maxFilterItems:this.maxFilterItems});
this.$filtersContainer.html(f);
this.setCheckedFilters();
this.bindFilterEvents();
if(h.hits.found===0){this.$noResults.height(this.$filtersWrapper.height());
this.updateFilterMargin()
}else{this.$filtersWrapper.css("margin-top","")
}}},updateFilterCountValues:function(c,a){for(var b=0;
b<c.length;
b++){if(c[b].value==a.value){a.count="("+c[b].count+")";
return
}}},showError:function(){var a=this;
a.$errorCall.removeClass("hidden")
},noResults:function(){var a=this;
a.$noResults.removeClass("hidden")
},formatString:function(b){var a;
for(a=0;
a<arguments.length;
a+=1){b=b.replace("{"+a+"}",arguments[a])
}return b
},keywordSearchEvent:function(){var a=this,c=0;
function b(e,d){clearTimeout(c);
c=setTimeout(function(){e()
},d||0)
}this.$searchInput.keyup(function(){b(function(){a.reloadFilters=true;
a.clearFilters();
a.clearPagination();
a.setUrlSelectors();
a.loadData()
},500)
})
},bindFilterEvents:function(){this.filterClickSearch();
this.clearAllFilters();
this.showMoreFilterItemsClick();
this.showLessFilterItemsClick()
},filterClickSearch:function(){var a=this;
this.$filtersContainer.find(a.searchFilterInput).each(function(){$(this).click(function(){a.setSelectedFilters();
a.reloadFilters=false;
a.clearPagination();
a.setUrlSelectors();
a.loadData()
})
})
},setSelectedFilters:function(){var a=this;
var b=this.$filtersContainer.find(this.searchFilterInput+":checked");
a.selectedFilters=[];
b.each(function(c){a.selectedFilters.push($(this).val())
})
},setCheckedFilters:function(){var a=this;
var c=this.selectedFilters;
for(i=0;
i<c.length;
i++){var b=this.$filtersContainer.find(this.searchFilterInput+'[value="'+c[i]+'"]');
if(b){b.attr("checked",true)
}}},clearAllFilters:function(){var a=this;
this.$clearFilters.click(function(b){a.reloadFilters=false;
a.clearFilters();
a.clearPagination();
a.setUrlSelectors();
a.loadData()
})
},clearFilters:function(){this.$filtersContainer.find(this.searchFilterInput).each(function(){$(this).attr("checked",false)
});
this.selectedFilters=[]
},showMoreFilterItemsClick:function(){var a=this;
this.$filtersContainer.find(a.showMore).each(function(){$(this).click(function(b){$(this).addClass("hidden");
$(this).parent().children(a.showMoreItems).removeClass("hidden");
$(this).parent().children(a.showLess).removeClass("hidden");
a.$noResults.height(a.$filtersWrapper.height());
b.stopPropagation()
})
})
},showLessFilterItemsClick:function(){var a=this;
this.$filtersContainer.find(a.showLess).each(function(){$(this).click(function(b){$(this).addClass("hidden");
$(this).parent().children(a.showMoreItems).addClass("hidden");
$(this).parent().children(a.showMore).removeClass("hidden");
a.$noResults.height(a.$filtersWrapper.height());
b.stopPropagation()
})
})
},loadData:function(){var a=this,b=this.buildUrl();
this.$loader.removeClass("hidden");
$.ajax({url:b,type:"GET",success:function(c){if(c&&typeof c==="string"){c=JSON.parse(c)
}if(c.hits.found===0){a.clearResults();
a.noResults();
if(a.selectedFilters.length===0){a.renderFilters(c)
}}else{a.loadResults(c)
}a.$loader.addClass("hidden")
},error:function(){a.showError();
a.$loader.addClass("hidden")
}})
},loadResults:function(a){this.clearResults();
this.renderResults(a);
if(this.reloadFilters){this.renderFilters(a)
}},buildUrl:function(){var c="/bin/cru/cloudsearch/search.html";
var a="";
var b=this.$searchInput.val();
if(b){a+="?q='"+b+"'"
}var d=(this.currentPage-1)*this.pageSize;
a+=(b?"&":"?")+"size="+this.pageSize+"&start="+d;
for(i=0;
i<this.selectedFilters.length;
i++){a+=i==0?"&fq=(and":"";
a+=" tags:'"+this.selectedFilters[i]+"'";
a+=this.selectedFilters.length==i+1?")":""
}a+=a.includes("facet")?"":"&facet[tags][sort]=count";
a+=b?'&fields=["title^5","description^2","body"]':"";
a+="&highlight[description][tag]=strong";
a+="&highlight[description][format]=html";
a+="&highlight[description][max_phrases]=5";
a+="&sort=descriptions_first+desc";
return c+a
},setUrlSelectors:function(){var a=this.getPageName();
var c=a.split(".");
var e=c[c.length-1];
var d=c[0];
var b=this.$searchInput.val();
if(b){d+="."+encodeURIComponent(b.replace(/\./g,"&#46;"))
}d+="."+this.currentPage;
d+=(this.selectedFilters.length>0?".":"")+this.encodeTagSelectors(this.selectedFilters);
history.replaceState(null,null,d+"."+e)
},loadFiltersFromUrl:function(){var a=this.getPageName();
var b=a.split(".html")[0].split(".");
if(b.length>=2){this.reloadFilters=true;
this.$searchInput.val(decodeURIComponent(b[1]))
}if(b.length>=3&&$.isNumeric(b[2])){this.currentPage=parseInt(b[2]);
if(this.currentPage<=0){this.currentPage=1
}}if(b.length>=4){this.selectedFilters=this.decodeTagSelectors(b.slice(3))
}},getPageName:function(){var b=window.location.pathname;
var a=b.substring(b.lastIndexOf("/")+1);
return a
},encodeTagSelectors:function(b){const a=Array.isArray(b)?b.join("."):b;
return encodeURIComponent(a.replace(/\//g,"|"))
},decodeTagSelectors:function(b){var a=[];
for(i=0;
i<b.length;
i++){a.push(decodeURIComponent(b[i]).replace("|","/"))
}return a
}};
$(Cru.components.omnisearch.className).ready(function(){Cru.components.omnisearch.init();
$(window).resize(Cru.components.omnisearch.updateFilterMargin)
});
$(function(){$(".locations__select select").bind("change",function(){var a=$(this).val();
if(a){window.location=a
}return false
})
});
(function(){var a=$("input[type='email']"),c=$("#email-subscribe-submit"),b={emailadd:/^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i};
a.keyup(function(){var d=a.val();
if(d!=""&&!b.emailadd.test(d)&&(d!=null)){var e="Please Enter a valid Email Address";
c.prop("disabled",true);
$(".error-message").text(e)
}else{$(".error-message").text("");
c.removeAttr("disabled")
}})
})();
var Cru=(function(a){return a
}(Cru||{}));
Cru.components=(function(a){return a
}(Cru.components||{}));
Cru.components.BladeNav={init:function(){$(".title-blade-nav a").click(function(a){a.preventDefault();
$(this).parent().addClass("active").siblings().removeClass("active");
let path;
if(a.originalEvent.path){path=a.originalEvent.path[0]
}else{path=a.originalEvent.currentTarget
}$(".content-blade-nav-"+path.dataset.uuid).addClass("d-none");
$("#"+path.id+"Content").removeClass("d-none")
})
}};
if($(".blade-nav").length){$(document).ready(function(){Cru.components.BladeNav.init()
})
}jQuery(document).ready(function(){var b="cruorg_ad_dismissed";
if(document.cookie.indexOf(b)>=0){jQuery(".ad-container").remove();
return
}else{jQuery(".ad-container").removeClass("d-none")
}jQuery(".ad-container-dismiss").click(function(){jQuery(".ad-container").remove();
a()
});
function a(){var c=new Date();
c.setDate(c.getDate()+1);
document.cookie=b+"=displayed; path=/; expires="+c.toGMTString()
}});